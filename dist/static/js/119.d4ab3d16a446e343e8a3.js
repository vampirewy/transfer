(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{"3s8Z":function(a,e,t){"use strict";var o=t("kaQf"),n={name:"Upload",props:{disabled:{type:Boolean,default:!1},headers:{type:Object,default:()=>({token:Object(o.l)()})},onSuccess:{type:Function},onProgress:{type:Function},onError:{type:Function},onExceed:{type:Function},beforeUpload:{type:Function},className:{type:[String,Object]},showFileList:{type:Boolean,default:!1},type:{type:String,required:!0}},data:()=>({API:"/api"})},r=t("KHd+"),s=Object(r.a)(n,(function(){var a=this,e=a.$createElement;return(a._self._c||e)("el-upload",{class:a.className,attrs:{disabled:a.disabled,headers:a.headers,action:a.API+"/file/upload","on-success":a.onSuccess,"on-exceed":a.onExceed,"on-progress":a.onProgress,"on-error":a.onError,"before-upload":a.beforeUpload,"show-file-list":a.showFileList,data:{type:a.type}}},[a._t("default")],2)}),[],!1,null,"54fa21fa",null);e.a=s.exports},"45vf":function(a,e,t){},UE6l:function(a,e,t){"use strict";t("45vf")},xDwH:function(a,e,t){"use strict";t.r(e);var o=t("kaQf"),n={name:"OrganizationInfo",components:{Upload:t("3s8Z").a},data:()=>({importHeaders:{sid:Object(o.l)()},API:"/api",formData:{organizationName:"",organizationAddress:"",contact:"",personalFrontImage:"",personalFrontImageName:"",personalBackImage:"",personalBackImageName:"",teamFrontImage:"",teamBackImage:"",introduction:""},personalFrontImageLoading:!1,personalBackImageLoading:!1}),mounted(){this.getOrganizationInfo()},methods:{handleContactChange(){this.formData.contact=this.formData.contact.replace(/[^0-9]/g,"")},getOrganizationInfo(){this.$api.loginInterface.getOrganizationInfo().then(({data:a})=>{this.formData={...a.data}})},submit(){this.$api.loginInterface.saveOrganizationInfo({...this.formData}).then(()=>{this.$message.success("操作成功")})},beforeUpload(a){if(!("application/pdf"===a.type))return this.$message.warning("上传附件只能是 pdf 格式!"),!1;return!!(a.size/1024/1024<15)||(this.$message({message:"上传文件大小不能超过 15MB!",type:"warning"}),!1)},handleUploadSuccess(a,e){this[e+"Loading"]=!1;const{code:t,data:o,message:n}=a;200===t?(this.formData[e]=o,this.formData[e+"Name"]=o.substring(o.lastIndexOf("/")+1)):this.$message.error(n||"网络异常！")},handleUploadError(a){this[a+"Loading"]=!1,this.$message.error("上传失败！")},handleUploadProgress(a){this[a+"Loading"]=!0}}},r=(t("UE6l"),t("KHd+")),s=Object(r.a)(n,(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"organization-info inputCommon"},[t("div",{staticClass:"title"},[a._v("机构信息维护")]),a._v(" "),t("el-form",{ref:"form",attrs:{model:a.formData,"label-width":"90px","label-suffix":"："}},[t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"机构名称",prop:"organizationName"}},[t("el-input",{attrs:{maxlength:"30",placeholder:"请输入"},model:{value:a.formData.organizationName,callback:function(e){a.$set(a.formData,"organizationName",e)},expression:"formData.organizationName"}})],1)],1),a._v(" "),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"机构地址",prop:"organizationAddress"}},[t("el-input",{attrs:{maxlength:"30",placeholder:"请输入"},model:{value:a.formData.organizationAddress,callback:function(e){a.$set(a.formData,"organizationAddress",e)},expression:"formData.organizationAddress"}})],1)],1),a._v(" "),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"咨询电话",prop:"contact"}},[t("el-input",{attrs:{placeholder:"请输入",maxlength:11},on:{input:a.handleContactChange},model:{value:a.formData.contact,callback:function(e){a.$set(a.formData,"contact",e)},expression:"formData.contact"}})],1)],1)],1),a._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"个报封面",prop:"personalFrontImage"}},[t("div",{staticClass:"form-item-upload"},[t("el-input",{attrs:{disabled:"",placeholder:"请上传pdf格式的封面"},model:{value:a.formData.personalFrontImageName,callback:function(e){a.$set(a.formData,"personalFrontImageName",e)},expression:"formData.personalFrontImageName"}}),a._v(" "),t("upload",{attrs:{"on-success":function(e){return a.handleUploadSuccess(e,"personalFrontImage")},"on-progress":function(){return a.handleUploadProgress("personalFrontImage")},"on-error":function(){return a.handleUploadError("personalFrontImage")},"before-upload":a.beforeUpload,"show-file-list":!1,disabled:a.personalFrontImageLoading,type:"organization"}},[t("el-button",{attrs:{size:"small",loading:a.personalFrontImageLoading}},[a._v("上传")])],1)],1)])],1),a._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"个报封底",prop:"personalBackImage"}},[t("div",{staticClass:"form-item-upload"},[t("el-input",{attrs:{disabled:"",placeholder:"请上传pdf格式的封底"},model:{value:a.formData.personalBackImageName,callback:function(e){a.$set(a.formData,"personalBackImageName",e)},expression:"formData.personalBackImageName"}}),a._v(" "),t("upload",{attrs:{"on-success":function(e){return a.handleUploadSuccess(e,"personalBackImage")},"on-progress":function(){return a.handleUploadProgress("personalBackImage")},"on-error":function(){return a.handleUploadError("personalBackImage")},"before-upload":a.beforeUpload,"show-file-list":!1,disabled:a.personalBackImageLoading,type:"organization"}},[t("el-button",{attrs:{size:"small",loading:a.personalBackImageLoading}},[a._v("上传")])],1)],1)])],1)],1),a._v(" "),t("el-form-item",{attrs:{label:"机构介绍"}},[t("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"请输入",maxlength:"1000","show-word-limit":""},model:{value:a.formData.introduction,callback:function(e){a.$set(a.formData,"introduction",e)},expression:"formData.introduction"}})],1),a._v(" "),t("div",{staticClass:"form-buttons"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:a.submit}},[a._v("保存")])],1)],1)],1)}),[],!1,null,"562c2552",null);e.default=s.exports}}]);