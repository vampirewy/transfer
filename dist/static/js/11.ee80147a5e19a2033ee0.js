(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"62lR":function(t,e,a){"use strict";a("77/Y")},"77/Y":function(t,e,a){},ErWZ:function(t,e,a){},bTQh:function(t,e,a){"use strict";a("ErWZ")},cfD5:function(t,e,a){"use strict";a.r(e);var i={name:"SelectSection",data:()=>({keyword:"",organItemLibraryId:"",tableData:[],total:0,currentPage:1,pageSize:5,selectRadio:""}),mounted(){this.queryList()},methods:{rowClick(t){this.selectRadio=t.id,this.$emit("change",t)},handleCurrentChange(t){this.currentPage=t,this.queryList()},handleSizeChange(t){this.pageSize=t,this.currentPage=1,this.queryList()},search(){this.currentPage=1,this.queryList()},async queryList(){const t=await this.$api.physicalProjectListInterface.getSectionList({organItemLibraryId:this.organItemLibraryId,pageNo:this.currentPage,pageSize:this.pageSize}),{data:e}=t.data;e&&(this.tableData=e.list||[],this.tableData.forEach(t=>{t.id=Math.random().toFixed(10)}),this.total=e.total)}}},s=(a("bTQh"),a("KHd+")),r={name:"create_edit",components:{selectSection:Object(s.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select-section"},[a("el-table",{attrs:{data:t.tableData},on:{"row-click":t.rowClick}},[a("el-table-column",{attrs:{width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-radio",{attrs:{label:e.row.id},model:{value:t.selectRadio,callback:function(e){t.selectRadio=e},expression:"selectRadio"}},[t._v(" ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"sectionName",label:"科室"}})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev,pager,next,jumper,total,sizes","page-sizes":[5],"pager-count":5,total:t.total,"page-size":t.pageSize,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)}),[],!1,null,"1a22cfa6",null).exports},data:()=>({routeType:"",popoverStatus:!1,sportlist:[],sporttypelist:[],sportclasslist:[],rules:{itemName:[{required:!0,message:"请输入运动名称"}],met:[{required:!0,message:"请输入代谢当量"}],strengthDegree:[{required:!0,message:"请选择运动强度"}],isMain:[{required:!0,message:"请选择运动分类"}],sporttype:[{required:!0,message:"请选择运动类型"}],isCompare:[{required:!0,message:"请选择是否启用"}]},form:{labelPosition:"right",labelWidth:"113px",itemName:"",met:"",strengthDegree:"",isMain:"",sporttype:"",minAge:"",maxAge:"",gender:"",isCompare:1,libraryList:[],sectionList:[]},dropdownList:[{name:"测试"}],genderList:[{name:"不限",value:0},{name:"男",value:1},{name:"女",value:2}],isCompareList:[{name:"否",value:0},{name:"是",value:1}],isMainList:[{name:"是",value:1},{name:"否",value:2}],table:[],section:{organItemLibraryId:"",list:[],totalCount:0,currentPage:1,pageSize:15}}),mounted(){this.onLoad()},methods:{oninput(){this.form.met>100?this.form.met=null:this.form.met=this.form.met.match(/^\d*(\.?\d{0,2})/g)[0]||null},onLoad(){const t=this.$route;this.getLibraryList(),"sport_list_create"===t.meta.type?this.routeType=1:"sport_list_edit"===t.meta.type?(this.routeType=2,this.getDetail()):"sport_list_detail"===t.meta.type&&(this.routeType=3,this.getDetail()),["SP001","SP002","SP003"].forEach(t=>{this.getSportList(t)})},getSportList(t){return this.loading=!0,this.$api.sportLibrary.getsportList(t).then(({data:e})=>{"SP001"===t?this.sportlist=e.data:"SP002"===t?this.sporttypelist=e.data:this.sportclasslist=e.data}).catch(()=>{this.loading=!1})},handlePopoperClose(){this.popoverStatus=!1},onSelectSection(t){this.form.sectionName=t.sectionName},dropdownChange(t){const e=this.dropdownList[t].name;this.form.sectionName=e},async getLibraryList(){const t=await this.$api.physicalProjectListInterface.listOrganItemLibrary(),{data:e}=t.data;this.form.libraryList=e},cancel(){this.$router.push({path:"/plan_center/sport_list"})},getDetail(){return this.loading=!0,this.$api.sportLibrary.getdetailList(this.$route.params.id).then(({data:t})=>{this.form.itemName=t.data.name,this.form.met=t.data.met,this.form.strengthDegree=t.data.strengthDegree,this.form.isMain=t.data.sportSort,this.form.sporttype=t.data.sportType,this.form.minAge=t.data.suitableAgeStart,this.form.maxAge=t.data.suitableAgeEnd,this.form.gender=t.data.suitableGender,this.form.isCompare=t.data.state}).catch(()=>{this.loading=!1})},async save(){this.$refs.form.validate(async t=>{if(t){const t={name:this.form.itemName,met:this.form.met,strengthDegree:this.form.strengthDegree,sportSort:this.form.isMain,sportType:this.form.sporttype,suitableAgeStart:this.form.minAge,suitableAgeEnd:this.form.maxAge,suitableGender:this.form.gender,state:this.form.isCompare};1===this.routeType&&(t.organItemLibraryId=this.form.libraryList&&this.form.libraryList.length?this.form.libraryList[0].id:"",await this.$api.sportLibrary.saveSportItem(t)),2===this.routeType&&(t.id=this.$route.params.id,await this.$api.sportLibrary.updatesport(t)),1===this.routeType&&Object.assign(this.$data,this.$options.data()),this.$message.success("操作成功"),this.cancel()}})}}},l=(a("62lR"),Object(s.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create-edit"},[a("el-form",{ref:"form",staticClass:"form-inline",attrs:{rules:t.rules,inline:!1,model:t.form,"label-position":t.right}},[a("div",{staticClass:"form-title"},[a("div",{staticClass:"line"}),t._v(" "),1===t.routeType?a("h3",{staticClass:"name"},[t._v("新增-运动项目")]):t._e(),t._v(" "),2===t.routeType?a("h3",{staticClass:"name"},[t._v("编辑-运动项目")]):t._e(),t._v(" "),3===t.routeType?a("h3",{staticClass:"name"},[t._v("查看-运动项目")]):t._e()]),t._v(" "),a("div",{staticClass:"mt20"},[a("div",{staticClass:"row"},[a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"运动名称：","label-width":"82px",prop:"itemName"}},[a("el-input",{staticStyle:{width:"230px"},attrs:{disabled:3===t.routeType,maxlength:"30",placeholder:"请输入"},model:{value:t.form.itemName,callback:function(e){t.$set(t.form,"itemName",e)},expression:"form.itemName"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"是否启用：",prop:"isCompare","label-width":"83px"}},[a("el-select",{staticStyle:{width:"230px"},attrs:{disabled:3===t.routeType,placeholder:"请选择是否启用"},model:{value:t.form.isCompare,callback:function(e){t.$set(t.form,"isCompare",e)},expression:"form.isCompare"}},t._l(t.isCompareList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"代谢当量：","label-width":"82px",prop:"met"}},[a("el-input",{staticClass:"numberinput",staticStyle:{width:"230px"},attrs:{type:"number",disabled:3===t.routeType,maxlength:"30",placeholder:"请输入"},on:{input:function(e){return t.oninput()}},model:{value:t.form.met,callback:function(e){t.$set(t.form,"met",e)},expression:"form.met"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"运动强度：",prop:"strengthDegree","label-width":"83px"}},[a("el-select",{staticStyle:{width:"230px"},attrs:{disabled:3===t.routeType,placeholder:"请选择"},model:{value:t.form.strengthDegree,callback:function(e){t.$set(t.form,"strengthDegree",e)},expression:"form.strengthDegree"}},t._l(t.sportlist,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.paramValue}})})),1)],1)],1),t._v(" "),a("div",{staticClass:"row"},[a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"运动分类：",prop:"isMain","label-width":"83px"}},[a("el-select",{staticStyle:{width:"230px"},attrs:{disabled:3===t.routeType,placeholder:"请选择"},model:{value:t.form.isMain,callback:function(e){t.$set(t.form,"isMain",e)},expression:"form.isMain"}},t._l(t.sportclasslist,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.paramValue}})})),1)],1),t._v(" "),a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"运动类型：",prop:"sporttype","label-width":"83px"}},[a("el-select",{staticStyle:{width:"230px"},attrs:{disabled:3===t.routeType,placeholder:"请选择"},model:{value:t.form.sporttype,callback:function(e){t.$set(t.form,"sporttype",e)},expression:"form.sporttype"}},t._l(t.sporttypelist,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.paramValue}})})),1)],1),t._v(" "),a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"适宜年龄：","label-width":"83px"}},[a("div",{staticStyle:{display:"flex"}},[a("el-input",{staticStyle:{width:"105px","margin-right":"6px"},attrs:{disabled:3===t.routeType,number:"",clearable:"",placeholder:"请输入"},model:{value:t.form.minAge,callback:function(e){t.$set(t.form,"minAge",e)},expression:"form.minAge"}}),t._v("\n          -\n          "),a("el-input",{staticStyle:{width:"105px","margin-left":"5px"},attrs:{disabled:3===t.routeType,number:"",clearable:"",placeholder:"请输入"},model:{value:t.form.maxAge,callback:function(e){t.$set(t.form,"maxAge",e)},expression:"form.maxAge"}})],1)]),t._v(" "),a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"适宜性别：","label-width":"83px"}},[a("template",{slot:"label"},[t._v("\n             适宜性别：\n          ")]),t._v(" "),a("el-select",{staticStyle:{width:"230px"},attrs:{disabled:3===t.routeType,placeholder:"请选择"},model:{value:t.form.gender,callback:function(e){t.$set(t.form,"gender",e)},expression:"form.gender"}},t._l(t.genderList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.value}})})),1)],2)],1),t._v(" "),a("div",{staticClass:"handle-btn mt10 mb30"},[a("el-button",{staticClass:"reset-btn",attrs:{size:"small"},on:{click:t.cancel}},[t._v("返回")]),t._v(" "),1===t.routeType?a("el-button",{staticClass:"add-btn",attrs:{type:"primary",size:"small"},on:{click:t.save}},[t._v("保存")]):t._e(),t._v(" "),2===t.routeType?a("el-button",{staticClass:"add-btn",attrs:{type:"primary",size:"small"},on:{click:t.save}},[t._v("修改")]):t._e()],1)])])],1)}),[],!1,null,"1344963d",null));e.default=l.exports}}]);