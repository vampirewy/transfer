(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{QYaX:function(e,t,s){"use strict";s("c7c/")},"c7c/":function(e,t,s){},jGTX:function(e,t,s){"use strict";s.r(t);var i={name:"create_edit",components:{ServiceOpen:s("oIwx").a},data:()=>({routeType:1,popoverStatus:!1,tableDditIndex:-1,labelPosition:"right",form:{serviceItemId:"",serviceItemName:"",type:"",servicePrice:"",serviceVipPrice:"",serviceAdvanceDay:"",state:"",serviceIntroduce:""},table:{list:[],itemIdList:[]},rules:{serviceItemName:[{required:!0,message:"请选择服务"}],type:[{required:!0,message:"请选择服务模式"}],servicePrice:[{required:!0,message:"请输入服务单价"}],serviceVipPrice:[{required:!0,message:"请输入会员价"}],serviceAdvanceDay:[{required:!0,message:"请输入提前时间"}],state:[{required:!0,message:"请选择状态"}]}}),mounted(){this.onLoad()},methods:{onLoad(){const e=this.$route;1===e.meta.type?this.routeType=1:2===e.meta.type?(this.routeType=2,this.getDetail()):3===e.meta.type&&(this.routeType=3,this.getDetail())},handlePopoperClose(e){this.$refs.userPopover.doClose(),this.popoverStatus=!1,this.form.serviceItemName=e.name,this.form.serviceItemId=e.id,this.form.type=e.type,this.form.servicePrice=e.price,this.form.serviceVipPrice=e.vipPrice,this.form.serviceAdvanceDay=e.advanceDay,this.form.state=e.state,this.form.serviceIntroduce=e.introduce},async getDetail(){const e=this.$route.params.id,t=await this.$api.ServiceManagerInterface.userServiceDetail(e),{data:s}=t.data;this.form.serviceItemName=s.serviceName,this.form.serviceItemId=s.serviceItemId,this.form.type=s.serviceType,this.form.servicePrice=s.servicePrice,this.form.serviceVipPrice=s.serviceVipPrice,this.form.serviceAdvanceDay=s.serviceAdvanceDay,this.form.state=s.state,this.form.serviceIntroduce=s.serviceIntroduce},addTable(){this.$refs.form.validate(async e=>{if(e){const e=this.tableDditIndex;console.log(this.table.list),console.log(e),-1!==e?(this.table.list[e].serviceItemId=this.form.serviceItemId,this.table.list[e].serviceItemName=this.form.serviceItemName,this.table.list[e].type=this.form.type,this.table.list[e].servicePrice=this.form.servicePrice,this.table.list[e].serviceVipPrice=this.form.serviceVipPrice,this.table.list[e].serviceAdvanceDay=this.form.serviceAdvanceDay,this.table.list[e].state=this.form.state,this.table.list[e].serviceIntroduce=this.form.serviceIntroduce):this.table.list.push({serviceItemId:this.form.serviceItemId,serviceItemName:this.form.serviceItemName,type:this.form.type,servicePrice:this.form.servicePrice,serviceVipPrice:this.form.serviceVipPrice,serviceAdvanceDay:this.form.serviceAdvanceDay,state:this.form.state,serviceIntroduce:this.form.serviceIntroduce}),this.form.serviceItemId="",this.form.serviceItemName="",this.form.type="",this.form.servicePrice="",this.form.serviceVipPrice="",this.form.serviceAdvanceDay="",this.form.state="",this.form.serviceIntroduce="",this.tableDditIndex=-1,this.$nextTick(()=>{this.$refs.form.clearValidate()}),console.log(this.table.list)}})},handleEdit(e,t){console.log(e),this.form.serviceItemId=e.serviceItemId,this.form.serviceItemName=e.serviceItemName,this.form.type=e.type,this.form.servicePrice=e.servicePrice,this.form.serviceVipPrice=e.serviceVipPrice,this.form.serviceAdvanceDay=e.serviceAdvanceDay,this.form.state=e.state,this.form.serviceIntroduce=e.serviceIntroduce,this.tableDditIndex=t},handleRemove(e){this.table.list.splice(e.$index,1)},cancel(){this.$router.push({path:"/my_service"})},async save(){let e="";if(1===this.routeType){if(e=this.table.list,0===e.length)return this.$message.warning("请选择服务");await this.$api.ServiceManagerInterface.userServiceSave(e),this.$message.success("操作成功"),this.cancel()}else 2===this.routeType&&this.$refs.form.validate(async t=>{if(t){const t=Object.assign({},this.form);t.id=this.$route.params.id,e=[t],await this.$api.ServiceManagerInterface.userServiceSave(e),this.$message.success("操作成功"),this.cancel()}})}}},r=(s("l3Da"),s("KHd+")),a=Object(r.a)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"create-edit"},[s("el-form",{ref:"form",staticClass:"form-inline",attrs:{inline:!1,"label-position":e.labelPosition,model:e.form,rules:e.rules,"label-width":"100px"}},[s("div",{staticClass:"tableTopDoDiv",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"divRightTitleDiv"},[s("div",{staticClass:"divRightTitle"},[s("span",[e._v("|")]),e._v("\n            "+e._s(1===e.routeType?"新增":2===e.routeType?"编辑":3===e.routeType?"查看":"")+"\n            -我的服务")])])]),e._v(" "),s("div",{staticClass:"row"},[s("el-form-item",{attrs:{label:"服务名称：",prop:"serviceItemName"}},[1===e.routeType?s("el-popover",{ref:"userPopover",attrs:{placement:"bottom-start",width:"570",trigger:"click"},on:{show:function(t){e.popoverStatus=!0},hide:function(t){e.popoverStatus=!1}}},[e.popoverStatus?s("service-open",{on:{change:e.handlePopoperClose}}):e._e(),e._v(" "),s("el-input",{staticClass:"select-user-trigger disabled",staticStyle:{width:"230px"},attrs:{slot:"reference",disabled:"",placeholder:"请选择"},slot:"reference",model:{value:e.form.serviceItemName,callback:function(t){e.$set(e.form,"serviceItemName",t)},expression:"form.serviceItemName"}},[s("i",{class:"el-icon-arrow-"+(e.popoverStatus?"up":"down"),attrs:{slot:"suffix"},slot:"suffix"})])],1):s("el-input",{staticStyle:{width:"230px"},attrs:{disabled:"",placeholder:""},model:{value:e.form.serviceItemName,callback:function(t){e.$set(e.form,"serviceItemName",t)},expression:"form.serviceItemName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"服务模式：",prop:"type"}},[s("el-select",{staticStyle:{width:"230px"},attrs:{placeholder:"请选择",disabled:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[s("el-option",{attrs:{label:"线上服务",value:2}}),e._v(" "),s("el-option",{attrs:{label:"线下服务",value:1}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"服务单价：",prop:"servicePrice"}},[s("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"请输入",number:"",disabled:3===e.routeType,maxlength:8},model:{value:e.form.servicePrice,callback:function(t){e.$set(e.form,"servicePrice",t)},expression:"form.servicePrice"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"会员价：",prop:"serviceVipPrice"}},[s("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"请输入",number:"",disabled:3===e.routeType,maxlength:8},model:{value:e.form.serviceVipPrice,callback:function(t){e.$set(e.form,"serviceVipPrice",t)},expression:"form.serviceVipPrice"}})],1)],1),e._v(" "),s("div",{staticClass:"row"},[s("el-form-item",{attrs:{label:"提前时间：",prop:"serviceAdvanceDay"}},[s("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"请输入",number:"",disabled:3===e.routeType,maxlength:3},model:{value:e.form.serviceAdvanceDay,callback:function(t){e.$set(e.form,"serviceAdvanceDay",t)},expression:"form.serviceAdvanceDay"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"状态：",prop:"state"}},[s("el-select",{staticStyle:{width:"230px"},attrs:{disabled:3===e.routeType,placeholder:"请选择"},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[s("el-option",{attrs:{label:"启用",value:1}}),e._v(" "),s("el-option",{attrs:{label:"禁用",value:0}})],1)],1)],1),e._v(" "),s("div",{staticClass:"row"},[s("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"服务介绍："}},[s("el-input",{attrs:{type:"textarea",rows:"5","show-word-limit":"",maxlength:1e3,placeholder:3!==e.routeType?"请输入":"",disabled:3===e.routeType,spellcheck:"false"},model:{value:e.form.serviceIntroduce,callback:function(t){e.$set(e.form,"serviceIntroduce",t)},expression:"form.serviceIntroduce"}})],1)],1),e._v(" "),1===e.routeType?s("div",{staticClass:"normalBtnDiv"},[s("el-button",{staticClass:"normalBtn",attrs:{size:"small"},on:{click:e.addTable}},[e._v("添加")])],1):e._e(),e._v(" "),1===e.routeType?s("div",{staticClass:"tableTopDoDiv",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"divRightTitleDiv"},[s("div",{staticClass:"divRightTitle"},[s("span",[e._v("|")]),e._v("已添加")])])]):e._e(),e._v(" "),1===e.routeType?s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.table.list,align:"center"}},[s("el-table-column",{attrs:{prop:"serviceItemName",label:"服务名称","show-overflow-tooltip":""}}),e._v(" "),s("el-table-column",{attrs:{prop:"type",label:"服务模式","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[2===t.row.type?s("span",[e._v("线上服务")]):e._e(),e._v(" "),1===t.row.type?s("span",[e._v("线下服务")]):e._e()]}}],null,!1,2438842770)}),e._v(" "),s("el-table-column",{attrs:{prop:"servicePrice",label:"服务单价","show-overflow-tooltip":""}}),e._v(" "),s("el-table-column",{attrs:{prop:"serviceVipPrice",label:"会员价","show-overflow-tooltip":""}}),e._v(" "),s("el-table-column",{attrs:{prop:"serviceIntroduce",label:"服务介绍","show-overflow-tooltip":""}}),e._v(" "),s("el-table-column",{attrs:{prop:"state",label:"状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.state?s("span",[e._v("启用")]):e._e(),e._v(" "),0===t.row.state?s("span",[e._v("禁用")]):e._e()]}}],null,!1,1379737823)}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return e.handleEdit(t.row,t.$index)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return e.handleRemove(t)}}},[e._v("删除")])]}}],null,!1,1264541503)})],1):e._e(),e._v(" "),s("div",{staticClass:"footer"},[s("el-button",{staticClass:"cancelBtn",attrs:{size:"small"},on:{click:e.cancel}},[e._v("返回")]),e._v(" "),1===e.routeType?s("el-button",{staticClass:"sureBtn",attrs:{type:"primary",size:"small"},on:{click:e.save}},[e._v("保存")]):e._e(),e._v(" "),2===e.routeType?s("el-button",{staticClass:"sureBtn",attrs:{type:"primary",size:"small"},on:{click:e.save}},[e._v("修改")]):e._e()],1)],1)],1)}),[],!1,null,"0d19be6c",null);t.default=a.exports},l3Da:function(e,t,s){"use strict";s("mzfu")},mzfu:function(e,t,s){},o0KO:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADOklEQVRYR8WWWaiNURTHf//MZShShGS4KYoic5KiWzIXSiEZHhASSYZkSqJbbnlQ5hdRrgwl8XKTIQ9mHkgpoiiZy7S0sr/b9t3znfOdc4v1ds5ee+3fXmt9/73Efzb95/PJDWBmo4FJwBigF9AJ+A68Ae4AV4Cjkj6Vc6mSAGY2BdgKDMoR+D1wANgn6UUO/+wMmFkH4DAwPU+glI9nYY6kc6X2FsyAmfUALgL9UwHuA2eAe8BroA3QDRgXytMx8v8FrJO0pxhEI4Bw82upw28DayV5nQuamTnMKmA90C5y2iBpZ9a+QgB1wLRow0FgqaRvpdLp62bmWTsL9An+3qjDJHmjNrK/AMxscticOB6UtCjPwbGPmXlZbgFdw/9esqGFLpEGuAsMDJuceHjem6chzWwUcBUaGn2lpH1pvwYAMxsBXI8cxhereZ6smNkJYHbwfSRpQDGAXd61weG+pCQTec7KaszhwI1osUrS09g5zkB9UDlf3y5pU8Unh41m5vFfRr2wQNKRLIBXQJewOEvSqaYChK/iEjAhxNomaXMWwFegdVgcI8kbqMlmZkeBeSHQfknLsgA+Am3DYrUkJ2+ymdlJYGYIVCNpdRbAE6BvWFwo6VCTT/8jTK6qI0Os9ZK82RssbsLT0cNzXFKStoo5zMwl+S3QMgSZJOlCFsByoDYsvgO6S/pS8el/bj8XOBZiuJR3lvQhC8C/gOcR7UZJOyoFMLPmwCOgKsSokzQjHS8txU7r1G7+po+Q9LASCDPbBmwMe3+4xEt6XAqge6BOntNnwNi8000S3MzmA7Hg1EpaUegihZ7jxWGsSvx98JiZRxfMrAXgQpPc3GP8BHpKckVsZFkT0W4fQCJvA1wZa4Cbkvx3g5lZe2Aq4PKd1Dx2uQxMkeRi95dlAfj/HmxL9JzGGXkAuHT7FORlGxw1b+LnN28WnVYQouhUbGYTw6fZu8xG9GytCaWsLgaRZyxvBSwBfDIq9kT7d34e2CvJ1c91wN8WH2IzIUoCpGrtUu1vfL8weHoveHP5914v6XM6U6UgygIoswxxk2ZnotKg5e7LyETNP8lAJFDpTNT/U4CoMbcDQ/xT/w2iPSO4RZmu9AAAAABJRU5ErkJggg=="},oIwx:function(e,t,s){"use strict";var i={name:"ServiceOpen",props:["serviceFrom"],data:()=>({name:"",tableData:[],total:0,currentPage:1,pageSize:5,selectRadio:""}),mounted(){this.queryList()},methods:{handleRowClick(e){console.log(e),this.$emit("change",e)},handleCurrentChange(e){this.currentPage=e,this.queryList()},handleSizeChange(e){this.pageSize=e,this.currentPage=1,this.queryList()},search(){this.currentPage=1,this.queryList()},async queryList(){let e;e="myService"===this.serviceFrom?await this.$api.ServiceManagerInterface.getMyServiceList({name:this.name,pageNo:this.currentPage,pageSize:this.pageSize,state:1}):await this.$api.ServiceManagerInterface.getServiceItemList({state:1,name:this.name,pageNo:this.currentPage,pageSize:this.pageSize});const{data:t}=e.data;t&&(this.tableData=t.list||[],this.total=t.total)}}},r=(s("QYaX"),s("KHd+")),a=Object(r.a)(i,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"medical-history-select-user"},[i("div",{staticClass:"searchInputFormItem"},[i("el-input",{attrs:{placeholder:"输入服务名称搜索"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),i("span",{staticClass:"searchBtnImgSpan",on:{click:e.search}},[i("img",{staticClass:"searchBtnImg",attrs:{src:s("o0KO")}})])],1),e._v(" "),i("el-table",{attrs:{data:e.tableData,align:"center"},on:{"row-click":e.handleRowClick}},[i("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-radio",{attrs:{label:t.row.id},model:{value:e.selectRadio,callback:function(t){e.selectRadio=t},expression:"selectRadio"}},[e._v(" ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"服务名称",width:"110px","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return["myService"===e.serviceFrom?i("span",[e._v(e._s(t.row.serviceName))]):i("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"typeDesc",label:"服务模式",width:"110px","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return["myService"===e.serviceFrom?i("span",[e._v(e._s(t.row.serviceTypeDesc))]):i("span",[e._v(e._s(t.row.typeDesc))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"introduce",label:"服务介绍","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return["myService"===e.serviceFrom?i("span",[e._v(e._s(t.row.serviceIntroduce))]):i("span",[e._v(e._s(t.row.introduce))])]}}])})],1),e._v(" "),i("el-pagination",{attrs:{background:"",layout:"prev,pager,next,jumper,total,sizes","page-sizes":[5],"pager-count":5,total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)}),[],!1,null,"5fa6bca1",null);t.a=a.exports}}]);