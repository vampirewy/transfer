(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{"3s8Z":function(e,t,a){"use strict";var s=a("kaQf"),r={name:"Upload",props:{disabled:{type:Boolean,default:!1},headers:{type:Object,default:()=>({token:Object(s.l)()})},onSuccess:{type:Function},onProgress:{type:Function},onError:{type:Function},onExceed:{type:Function},beforeUpload:{type:Function},className:{type:[String,Object]},showFileList:{type:Boolean,default:!1},type:{type:String,required:!0}},data:()=>({API:"/api"})},i=a("KHd+"),o=Object(i.a)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-upload",{class:e.className,attrs:{disabled:e.disabled,headers:e.headers,action:e.API+"/file/upload","on-success":e.onSuccess,"on-exceed":e.onExceed,"on-progress":e.onProgress,"on-error":e.onError,"before-upload":e.beforeUpload,"show-file-list":e.showFileList,data:{type:e.type}}},[e._t("default")],2)}),[],!1,null,"54fa21fa",null);t.a=o.exports},"9XqA":function(e,t,a){},HgT1:function(e,t,a){"use strict";a("RVVG")},I7AD:function(e,t,a){},IVd5:function(e,t,a){"use strict";var s={name:"uploadImg",components:{Upload:a("3s8Z").a},props:{value:{type:String,default:""},imgtype:{type:String,default:""},imgform:{type:String,default:""},refIndex:{type:String,default:""},disabled:{type:Boolean,default:!1}},data:()=>({upload_url:"http://182.61.43.226:9002/"}),computed:{imageUrl(){return this.value}},methods:{emitInput(e){this.$emit("input",e,this.refIndex)},handleImageSuccess(e){this.emitInput(e.data)},beforeUpload(e){if(!(e.size/1024/1024<1))return this.$message({message:"上传文件大小不能超过 1MB!",type:"warning"}),!1;const t="image/jpeg"===e.type,a="image/png"===e.type;return!(!t&&!a)||(this.$message.warning("上传头像只能是 JPG、JPEG、PNG 格式!"),!1)}}},r=(a("PflC"),a("KHd+")),i=Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{"upload-container":"headimg"!=e.imgform}},[a("upload",{attrs:{disabled:e.disabled,"on-success":e.handleImageSuccess,"before-upload":e.beforeUpload,className:{"avatar-uploader":"headimg"!=e.imgform,"avatar-uploader-yuan":"headimg"==e.imgform},"show-file-list":!1,type:"headimg"===e.imgform?"userImage":"userAuth"}},[a("span",[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.upload_url+e.imageUrl}}):a("i",{class:{"el-icon-plus":!0,"avatar-uploader-main":"idCardFront"==e.imgtype,"avatar-uploader-back":"idCardBack"==e.imgtype,"avatar-uploader-headimg":"headimg"==e.imgtype}})])])],1)}),[],!1,null,null,null);t.a=i.exports},PflC:function(e,t,a){"use strict";a("X3jJ")},RVVG:function(e,t,a){},RgSw:function(e,t,a){"use strict";var s={name:"AuthDialog",components:{Upload:a("3s8Z").a},props:{authData:{type:Object}},data:()=>({form:{id:"",userAuthType:"",userAuthName:"",certificateImageUrl:""},rules:{userAuthType:[{required:!0,message:"请选择职称类别"}],userAuthName:[{required:!0,message:"请输入职称名称"}],certificateImageUrl:[{required:!0,message:"请上传职称证件"}]},typeList:[]}),mounted(){this.getTypeList(),this.authData&&(this.form.id=this.authData.id,this.form.userAuthType=this.authData.userAuthType,this.form.userAuthName=this.authData.userAuthName,this.form.certificateImageUrl=this.authData.certificateImageUrl)},methods:{getTypeList(){this.$api.personal.getTypeList().then(({data:e})=>{this.typeList=e.data||[]})},handleClose(){this.$emit("close")},beforeUpload(e){if(!(e.size/1024/1024<=5))return this.$message.warning("上传文件大小不能超过 5MB!"),!1;const t="image/jpeg"===e.type,a="image/png"===e.type;return!(!t&&!a)||(this.$message.warning("上传附件只能是 JPG、JPEG、PNG 格式!"),!1)},handleImageSuccess(e){const{code:t,data:a,message:s}=e;200===t?this.form.certificateImageUrl=a:this.$message.error(s||"网络异常！")},submit(){this.$refs.form.validate(e=>{if(e){const{id:e,userAuthType:t,userAuthName:a,certificateImageUrl:s}=this.form;let r="";for(let e=0;e<this.typeList.length;e++)if(this.typeList[e].paramValue===t){r=this.typeList[e].name;break}this.$emit("submit",{id:e,userAuthName:a,userAuthType:t,certificateImageUrl:s,userAuthTypeDesc:r})}})}}},r=(a("HgT1"),a("KHd+")),i=Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"auth-dialog",attrs:{title:e.authData?"编辑认证信息":"新增认证信息",visible:!0,width:"570px","before-close":e.handleClose}},[a("div",{staticClass:"title"},[e._v("认证信息")]),e._v(" "),a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"90px","label-suffix":"："}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"职称类别",prop:"userAuthType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.userAuthType,callback:function(t){e.$set(e.form,"userAuthType",t)},expression:"form.userAuthType"}},e._l(e.typeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.paramValue}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"职称名称",prop:"userAuthName"}},[a("el-input",{attrs:{maxlength:"30",placeholder:"请输入"},model:{value:e.form.userAuthName,callback:function(t){e.$set(e.form,"userAuthName",t)},expression:"form.userAuthName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"职称证件",prop:"certificateImageUrl"}},[a("div",{staticClass:"form-item-upload"},[a("el-input",{attrs:{disabled:"",placeholder:e.form.certificateImageUrl?"已上传":"请上传小于5M的附件"}}),e._v(" "),a("upload",{attrs:{"on-success":e.handleImageSuccess,"before-upload":e.beforeUpload,"show-file-list":!1,type:"userAuth"}},[a("el-button",{attrs:{size:"small"}},[e._v(e._s(e.form.certificateImageUrl?"重新上传":"上传"))])],1)],1)])],1)],1)],1),e._v(" "),a("div",{staticClass:"buttons"},[a("el-button",{attrs:{plain:"",size:"small"},on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("确定")])],1)],1)}),[],!1,null,"552a94df",null);t.a=i.exports},"U/BG":function(e,t,a){"use strict";a("fto8")},X3jJ:function(e,t,a){},Xxbr:function(e,t,a){"use strict";a("9XqA")},eSUy:function(e,t,a){"use strict";a.r(t);var s=a("IVd5"),r=a("kaQf"),i=a("RgSw"),o={name:"personalInfo",components:{Upload:s.a,AuthDialog:i.a},data:()=>({personalForm:{headImage:"",realName:"",mobile:"",introduction:"",skill:"",specializedTreatmentList:[],userAuthList:[]},specializedTreatment:"",personalRules:{},authDialogStatus:!1,upload_url:"http://182.61.43.226:9002/",removeTreatmentIds:[],removeAuthIds:[],currentAuth:null,canSave:!1,canAudit:!1,auditState:""}),mounted(){this.getUsercenterInfo()},methods:{editAuth(e){this.currentAuth=e,this.authDialogStatus=!0},deleteAuth(e,t){this.personalForm.userAuthList.splice(t,1),e.id&&this.removeAuthIds.push(e.id)},handleAuthClose(){this.currentAuth=null,this.authDialogStatus=!1},handleAuthSubmit(e){if(this.currentAuth){const t=this.personalForm.userAuthList.indexOf(this.currentAuth);this.personalForm.userAuthList[t]=e}else this.personalForm.userAuthList.push(e);this.currentAuth=null,this.authDialogStatus=!1},addSpecializedTreatment(){this.specializedTreatment=this.specializedTreatment.trim(),this.specializedTreatment&&(this.personalForm.specializedTreatmentList.push({content:this.specializedTreatment}),this.specializedTreatment="")},deleteSpecializedTreatment(e){this.personalForm.specializedTreatmentList.splice(this.personalForm.specializedTreatmentList.indexOf(e),1),e.id&&this.removeTreatmentIds.push(e.id)},getUsercenterInfo(){this.removeTreatmentIds=[],this.removeAuthIds=[],this.$api.personal.userCenter().then(e=>{this.personalForm.headImage=e.data.data.headImage,this.personalForm.realName=e.data.data.realName,this.personalForm.mobile=e.data.data.mobile,this.personalForm.introduction=e.data.data.introduction,this.personalForm.skill=e.data.data.skill,this.personalForm.specializedTreatmentList=e.data.data.specializedTreatmentList,this.personalForm.userAuthList=e.data.data.userAuthList,this.auditState=e.data.data.auditState})},save(){this.$refs.personalForm.validate(e=>{e&&this.$api.personal.saveUserInfo({...this.personalForm,removeTreatmentIds:this.removeTreatmentIds,removeAuthIds:this.removeAuthIds}).then(()=>{this.$message.success("操作成功"),this.getUsercenterInfo(),this.$store.commit("user/SET_AVATAR",this.personalForm.headImage);const e=Object(r.m)("HK_USER_INFO"),t=JSON.parse(e);t.headImage=this.personalForm.headImage,Object(r.n)("HK_USER_INFO",JSON.stringify(t))})})},submitAudit(){this.$api.personal.submitAudit().then(()=>{this.$message.success("操作成功"),this.getUsercenterInfo()})}}},l=(a("U/BG"),a("KHd+")),n={name:"PersonalCenter",components:{PersonalInfo:Object(l.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"personalContent"},[a("div",{staticClass:"person-title"},[e._v("个人信息")]),e._v(" "),a("el-form",{ref:"personalForm",staticClass:"inputCommon",attrs:{model:e.personalForm,rules:e.personalRules,"label-width":"70px"}},[a("el-form-item",{staticClass:"form-item-avatar",attrs:{label:"头像"}},[a("Upload",{attrs:{imgtype:"headimg",imgform:"headimg"},model:{value:e.personalForm.headImage,callback:function(t){e.$set(e.personalForm,"headImage",t)},expression:"personalForm.headImage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名"}},[a("div",[e._v(e._s(e.personalForm.realName))])]),e._v(" "),a("el-form-item",{attrs:{label:"联系电话"}},[a("div",[e._v(e._s(e.personalForm.mobile))])]),e._v(" "),a("el-form-item",{attrs:{label:"简介"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{type:"textarea",rows:"5",maxlength:"1000",placeholder:"'请简单的介绍你自己吧","show-word-limit":""},model:{value:e.personalForm.introduction,callback:function(t){e.$set(e.personalForm,"introduction",t)},expression:"personalForm.introduction"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"擅长"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{type:"textarea",rows:"5",maxlength:"1000",placeholder:"您擅长什么都可以写出来","show-word-limit":""},model:{value:e.personalForm.skill,callback:function(t){e.$set(e.personalForm,"skill",t)},expression:"personalForm.skill"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"专治"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{maxlength:"30",placeholder:"请输入后添加"},model:{value:e.specializedTreatment,callback:function(t){e.specializedTreatment=t},expression:"specializedTreatment"}})],1),e._v(" "),a("el-button",{staticClass:"add-button",attrs:{size:"small"},on:{click:e.addSpecializedTreatment}},[e._v("添加")])],1),e._v(" "),e.personalForm.specializedTreatmentList.length>0?a("div",{staticClass:"specialized-treatments"},e._l(e.personalForm.specializedTreatmentList,(function(t,s){return a("el-tag",{key:s,attrs:{closable:""},on:{close:function(a){return e.deleteSpecializedTreatment(t)}}},[e._v("\n          "+e._s(t.content)+"\n        ")])})),1):e._e()],1),e._v(" "),a("div",{staticClass:"buttons"},[a("el-button",{attrs:{plain:"",size:"small"},on:{click:function(t){return e.$router.back()}}},[e._v("返回")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.save}},[e._v("保存")])],1)],1),e._v(" "),e.authDialogStatus?a("auth-dialog",{attrs:{authData:e.currentAuth},on:{close:e.handleAuthClose,submit:e.handleAuthSubmit}}):e._e()],1)}),[],!1,null,"5784a825",null).exports,ModifyPassword:a("g9ZM").a}},m=(a("wQKD"),Object(l.a)(n,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"personal-center"},[t("el-tabs",[t("el-tab-pane",{attrs:{label:"个人信息"}},[t("personal-info")],1),this._v(" "),t("el-tab-pane",{attrs:{label:"修改密码"}},[t("modify-password")],1)],1)],1)}),[],!1,null,"7d554149",null));t.default=m.exports},fto8:function(e,t,a){},g9ZM:function(e,t,a){"use strict";var s={name:"ModifyPassword",data:()=>({modifyForm:{oldPassword:"",newPassword:"",confirmPassword:""},modifyRules:{oldPassword:[{required:!0,message:"愿密码不能为空"}],newPassword:[{required:!0,message:"新密码不能为空"}],confirmPassword:[{required:!0,message:"确认密码不能为空"}]}}),methods:{save(){this.$refs.modifyForm.validate(e=>{e&&this.modifyPassword()})},modifyPassword(){const e={...this.modifyForm};this.$api.loginInterface.modifyPassword(e).then(()=>{this.$message.success("操作成功"),this.$refs.modifyForm.resetFields()})}}},r=(a("Xxbr"),a("KHd+")),i=Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modify-password inputCommon"},[a("div",{staticClass:"modify-title"},[e._v("修改密码")]),e._v(" "),a("el-form",{ref:"modifyForm",attrs:{model:e.modifyForm,rules:e.modifyRules,"label-width":"90px","label-suffix":"：","lable-position":"right"}},[a("el-form-item",{attrs:{label:"原密码",prop:"oldPassword"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入原密码"},model:{value:e.modifyForm.oldPassword,callback:function(t){e.$set(e.modifyForm,"oldPassword",t)},expression:"modifyForm.oldPassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:e.modifyForm.newPassword,callback:function(t){e.$set(e.modifyForm,"newPassword",t)},expression:"modifyForm.newPassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[a("el-input",{attrs:{type:"password",placeholder:"请再次输入"},model:{value:e.modifyForm.confirmPassword,callback:function(t){e.$set(e.modifyForm,"confirmPassword",t)},expression:"modifyForm.confirmPassword"}})],1),e._v(" "),a("div",{staticClass:"form-buttons"},[a("el-button",{attrs:{plain:"",size:"small"},on:{click:function(t){return e.$router.back()}}},[e._v("返回")]),e._v(" "),a("el-button",{staticClass:"save-button",attrs:{type:"primary",size:"small"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)}),[],!1,null,"f9ad665c",null);t.a=i.exports},wQKD:function(e,t,a){"use strict";a("I7AD")}}]);