(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{aMfj:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return o}));const i=[{name:"全部状态",value:""},{name:"启用",value:1},{name:"不启用",value:0}],s=[{name:"全部",value:""},{name:"不限",value:0},{name:"男",value:1},{name:"女",value:2}],r=[{name:"全部",value:""},{name:"是",value:1},{name:"否",value:0}],o=[{name:"是",value:1},{name:"否",value:0}]},b8Ep:function(e,t,a){"use strict";a("k8P3")},iRZI:function(e,t,a){},k8P3:function(e,t,a){},nM98:function(e,t,a){"use strict";a("iRZI")},xcRv:function(e,t,a){"use strict";a.r(t);var i={name:"SelectSection",data:()=>({keyword:"",organItemLibraryId:"",tableData:[],total:0,currentPage:1,pageSize:5,selectRadio:""}),mounted(){this.queryList()},methods:{rowClick(e){this.selectRadio=e.id,this.$emit("change",e)},handleCurrentChange(e){this.currentPage=e,this.queryList()},handleSizeChange(e){this.pageSize=e,this.currentPage=1,this.queryList()},search(){this.currentPage=1,this.queryList()},async queryList(){const e=await this.$api.physicalProjectListInterface.getSectionList({organItemLibraryId:this.organItemLibraryId,pageNo:this.currentPage,pageSize:this.pageSize}),{data:t}=e.data;t&&(this.tableData=t.list||[],this.tableData.forEach(e=>{e.id=Math.random().toFixed(10)}),this.total=t.total)}}},s=(a("b8Ep"),a("KHd+")),r=Object(s.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"select-section"},[a("el-table",{attrs:{data:e.tableData},on:{"row-click":e.rowClick}},[a("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.id},model:{value:e.selectRadio,callback:function(t){e.selectRadio=t},expression:"selectRadio"}},[e._v(" ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sectionName",label:"科室"}})],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev,pager,next,jumper,total,sizes","page-sizes":[5],"pager-count":5,total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)}),[],!1,null,"8be6c10a",null).exports,o=a("aMfj"),l={name:"create_edit",components:{selectSection:r},data:()=>({routeType:1,popoverStatus:!1,form:{labelPosition:"right",labelWidth:"113px",sectionName:"",itemName:"",gender:0,isCompare:1,isMain:1,state:1,minAge:"",maxAge:"",minValue:"",maxValue:"",refRange:"",unit:"",intro:"",organItemLibraryId:"",libraryList:[],sectionList:[]},genderList:o.a,isCompareList:o.b,isMainList:o.c.filter(e=>""!==e.value),table:[],section:{organItemLibraryId:"",list:[],totalCount:0,currentPage:1,pageSize:15},rules:{itemName:[{required:!0,message:"小项名称不能为空"}],sectionName:[{required:!0,message:"项目科室不能为空"}],gender:[{required:!0,message:"适宜性别不能为空"}],organItemLibraryId:[{required:!0,message:"项目分类不能为空"}],isCompare:[{required:!0,message:"是否对比不能为空"}],isMain:[{required:!0,message:"重要指标不能为空"}]}}),computed:{getTitle(){return 1===this.routeType?"新增-体检项目":2===this.routeType?"编辑-体检项目":3===this.routeType?"查看-体检项目":void 0}},mounted(){this.onLoad()},methods:{onLoad(){const e=this.$route;this.getLibraryList(),"physical_project_list_create"===e.meta.type?this.routeType=1:"physical_project_list_edit"===e.meta.type?(this.routeType=2,this.getDetail()):"physical_project_list_detail"===e.meta.type&&(this.routeType=3,this.getDetail())},ageMinBlur(){null!==this.form.maxAge&&""!==this.form.maxAge&&Number(this.form.minAge)>Number(this.form.maxAge)&&(this.form.minAge="",this.$message.warning("最小年龄不能大于最大年龄"))},ageMaxBlur(){null!==this.form.minAge&&""!==this.form.minAge&&Number(this.form.maxAge)<Number(this.form.minAge)&&(this.form.maxAge="",this.$message.warning("最大年龄不能小于最小年龄"))},handlePopoperClose(){this.popoverStatus=!1},onSelectSection(e){this.form.sectionName=e.sectionName},async getLibraryList(){const e=await this.$api.physicalProjectListInterface.listOrganItemLibrary(),{data:t}=e.data;this.form.libraryList=t,this.form.libraryList&&this.form.libraryList.length&&(this.form.organItemLibraryId=t[0].id)},async getDetail(){const e={id:this.$route.params.id},t=await this.$api.physicalProjectListInterface.getOrganItem(e),{data:a}=t.data;this.form.organItemLibraryId=a.organItemLibraryId,this.form.itemName=a.itemName,this.form.gender=a.gender,this.form.isCompare=o.b.map(e=>e.value).includes(a.isCompare)?a.isCompare:"",this.form.isMain=o.c.map(e=>e.value).includes(a.isMain)?a.isMain:"",this.form.state=a.state,this.form.unit=a.unit,this.form.minAge=a.minAge,this.form.maxAge=a.maxAge,this.form.minValue=a.minValue,this.form.maxValue=a.maxValue,this.form.refRange=a.refRange,this.form.sectionName=a.sectionName,this.form.intro=a.intro},cancel(){this.$router.push({path:"/basic_data/physical_project_list"})},async save(){const e={organItemLibraryId:this.form.organItemLibraryId,sectionName:this.form.sectionName,itemName:this.form.itemName,gender:this.form.gender,isCompare:this.form.isCompare,isMain:this.form.isMain,state:this.form.state,minAge:this.form.minAge,maxAge:this.form.maxAge,minValue:this.form.minValue,maxValue:this.form.maxValue,refRange:this.form.refRange,unit:this.form.unit,intro:this.form.intro};this.$refs.form.validate(async t=>{t&&(1===this.routeType&&await this.$api.physicalProjectListInterface.saveOrganItem(e),2===this.routeType&&(e.id=this.$route.params.id,await this.$api.physicalProjectListInterface.updateOrganItem(e)),1===this.routeType&&Object.assign(this.$data,this.$options.data()),this.$message.success("操作成功"),this.cancel())})}}},n=(a("nM98"),Object(s.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"create-edit"},[a("el-form",{ref:"form",staticClass:"form-inline",attrs:{inline:!1,model:e.form,rules:e.rules,"label-position":e.right,"label-suffix":"：","label-width":"83px"}},[a("div",{staticClass:"form-title"},[a("div",{staticClass:"line"}),e._v(" "),a("h3",{staticClass:"name"},[e._v(e._s(e.getTitle))])]),e._v(" "),a("div",{staticClass:"mt20"},[a("div",{staticClass:"row"},[a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"小项名称",prop:"itemName"}},[a("el-input",{staticStyle:{width:"230px"},attrs:{disabled:3===e.routeType,placeholder:"请输入"},model:{value:e.form.itemName,callback:function(t){e.$set(e.form,"itemName",t)},expression:"form.itemName"}})],1),e._v(" "),a("el-form-item",{staticClass:"section-name",staticStyle:{width:"25%"},attrs:{label:"项目科室",prop:"sectionName"}},[3===e.routeType?a("el-input",{staticClass:"select-user-input",staticStyle:{width:"230px"},attrs:{disabled:"",placeholder:"请输入"},model:{value:e.form.sectionName,callback:function(t){e.$set(e.form,"sectionName",t)},expression:"form.sectionName"}},[a("i",{class:"el-icon-caret-"+(e.popoverStatus?"top":"bottom"),attrs:{slot:"suffix"},slot:"suffix"})]):e._e(),e._v(" "),3!==e.routeType?a("el-popover",{attrs:{placement:"bottom-start",width:"650",trigger:"click"},on:{show:function(t){e.popoverStatus=!0},hide:e.handlePopoperClose}},[e.popoverStatus?a("select-section",{on:{change:e.onSelectSection}}):e._e(),e._v(" "),a("el-input",{staticClass:"select-user-input",staticStyle:{width:"230px"},attrs:{slot:"reference",disabled:3===e.routeType,placeholder:"请输入"},slot:"reference",model:{value:e.form.sectionName,callback:function(t){e.$set(e.form,"sectionName",t)},expression:"form.sectionName"}},[a("i",{class:"el-icon-caret-"+(e.popoverStatus?"top":"bottom"),attrs:{slot:"suffix"},slot:"suffix"})])],1):e._e()],1),e._v(" "),a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"适宜年龄",prop:"minAge"}},[a("el-input",{staticStyle:{width:"100px","margin-right":"6px"},attrs:{disabled:3===e.routeType,clearable:"",placeholder:"请输入"},on:{blur:e.ageMinBlur},model:{value:e.form.minAge,callback:function(t){e.$set(e.form,"minAge",t)},expression:"form.minAge"}}),e._v("\n          -\n          "),a("el-input",{staticStyle:{width:"100px","margin-left":"5px"},attrs:{disabled:3===e.routeType,clearable:"",placeholder:"请输入"},on:{blur:e.ageMaxBlur},model:{value:e.form.maxAge,callback:function(t){e.$set(e.form,"maxAge",t)},expression:"form.maxAge"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"适宜性别",prop:"gender"}},[a("el-select",{staticStyle:{width:"230px"},attrs:{disabled:3===e.routeType,placeholder:"请选择"},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},e._l(e.genderList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1),e._v(" "),a("div",{staticClass:"row"},[a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"项目分类",prop:"organItemLibraryId"}},[a("el-select",{staticStyle:{width:"230px"},attrs:{disabled:3===e.routeType,placeholder:"请选择"},model:{value:e.form.organItemLibraryId,callback:function(t){e.$set(e.form,"organItemLibraryId",t)},expression:"form.organItemLibraryId"}},e._l(e.form.libraryList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"单位",prop:"unit"}},[a("el-input",{staticStyle:{width:"230px"},attrs:{disabled:3===e.routeType,placeholder:"请输入"},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"正常参考",prop:"refRange"}},[a("el-input",{staticStyle:{width:"230px"},attrs:{disabled:3===e.routeType,placeholder:"请输入"},model:{value:e.form.refRange,callback:function(t){e.$set(e.form,"refRange",t)},expression:"form.refRange"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"是否对比",prop:"isCompare"}},[a("el-select",{staticStyle:{width:"230px"},attrs:{disabled:3===e.routeType,placeholder:"请选择"},model:{value:e.form.isCompare,callback:function(t){e.$set(e.form,"isCompare",t)},expression:"form.isCompare"}},e._l(e.isCompareList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1),e._v(" "),a("div",{staticClass:"row"},[a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"重要指标",prop:"isMain"}},[a("el-select",{staticStyle:{width:"230px"},attrs:{disabled:3===e.routeType,placeholder:"请选择"},model:{value:e.form.isMain,callback:function(t){e.$set(e.form,"isMain",t)},expression:"form.isMain"}},e._l(e.isMainList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1),e._v(" "),a("div",{staticClass:"row"},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"介绍",prop:"intro"}},[a("el-input",{attrs:{disabled:3===e.routeType,type:"textarea",rows:5,placeholder:"请输入",maxlength:400,"show-word-limit":""},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1)],1),e._v(" "),a("div",{staticClass:"handle-btn mt10 mb30"},[a("el-button",{staticClass:"reset-btn",attrs:{size:"small"},on:{click:e.cancel}},[e._v("返回")]),e._v(" "),1===e.routeType?a("el-button",{staticClass:"add-btn",attrs:{type:"primary",size:"small"},on:{click:e.save}},[e._v("保存")]):e._e(),e._v(" "),2===e.routeType?a("el-button",{staticClass:"add-btn",attrs:{type:"primary",size:"small"},on:{click:e.save}},[e._v("修改")]):e._e()],1)])])],1)}),[],!1,null,"bbe20a4c",null));t.default=n.exports}}]);