(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{"3HK8":function(e,t,a){},"8YTr":function(e,t,a){"use strict";var s={name:"MedicalHistorySelectUser",data:()=>({keyword:"",tableData:[],total:0,currentPage:1,pageSize:5,selectRadio:""}),mounted(){this.queryList()},methods:{rowClick(e){this.selectRadio=e.id,this.$emit("change",e)},handleCurrentChange(e){this.currentPage=e,this.queryList()},handleSizeChange(e){this.pageSize=e,this.currentPage=1,this.queryList()},search(){this.currentPage=1,this.queryList()},async queryList(){const e=await this.$api.userFollowInterface.getClientInfoListPage({keywords:this.keyword,pageNo:this.currentPage,pageSize:this.pageSize});console.log(e.data);const{data:t}=e.data;t&&(this.tableData=t.data||[],this.total=t.total)}}},i=(a("ZNcs"),a("KHd+")),l=Object(i.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"medical-history-select-user"},[a("div",{staticClass:"query"},[a("el-input",{attrs:{placeholder:"输入条件搜索"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),a("el-button",{staticClass:"search-button",on:{click:e.search}},[a("i",{staticClass:"el-icon-search"})])],1),e._v(" "),a("el-table",{staticClass:"openTable",attrs:{data:e.tableData},on:{"row-click":e.rowClick}},[a("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.id},model:{value:e.selectRadio,callback:function(t){e.selectRadio=t},expression:"selectRadio"}},[e._v(" ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"age",label:"年龄"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gender",label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.gender?a("span",[e._v("男")]):e._e(),e._v(" "),2===t.row.gender?a("span",[e._v("女")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev,pager,next,jumper,total,sizes","page-sizes":[5],"pager-count":5,total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)}),[],!1,null,"60f93452",null);t.a=l.exports},ZNcs:function(e,t,a){"use strict";a("3HK8")},auQe:function(e,t,a){"use strict";a.r(t);var s=a("vx18"),i=a("8YTr"),l={name:"medication_history_add",components:{detail:s.a,selectUser:i.a},data:()=>({popoverStatus:!1,infoSource:{drugsName:"",mainIndication:"",specification:"",countDay:"",startDate:"",endDate:"",dose:"",ingrenient:"",resoures:"",result:"",clientName:"",clientId:"",age:"",gender:"",gridName:""},drugsList:[],resultList:[],rules:{clientName:[{required:!0,message:"客户不能为空"}],drugsName:[{required:!0,message:"药品名称不能为空"}],startDate:[{required:!0,message:"开始时间不能为空"}],endDate:[{required:!0,message:"结束时间不能为空"}],result:[{required:!0,message:"当前状态不能为空"}]},id:""}),mounted(){window.vm=this,this.getResultList()},methods:{async getResultList(){console.log("sdfsfsdf"),this.$api.medicalHistoryInterface.medicalInfoDetail(this.id).then(e=>{const{data:t}=e;this.data=t.data||{},console.log(this.data,"zzzzzzzzz")})},handlePopoperClose(){this.popoverStatus=!1},onSelectUser(e){this.$refs.userPopover.doClose(),this.popoverStatus=!1,this.infoSource.clientName=e.name,this.infoSource.clientId=e.id,this.infoSource.age=e.age,this.infoSource.gender=e.gender,this.infoSource.gridName=e.gridName},addRecord(){this.$refs.form.validate(e=>{e&&(this.drugsList.push(JSON.parse(JSON.stringify(this.infoSource))),this.clear())})},remove(e){this.$confirm("确定要删除该数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.drugsList.splice(e,1)})},clear(){["drugsName","mainIndication","specification","countDay","startDate","endDate","dose","result","ingrenient","resoures"].map(e=>(this.infoSource[e]="",!0)),setTimeout(()=>{this.$refs.form.clearValidate()},0)},goBack(){this.$router.go(-1)},submit(){const e={clientId:this.infoSource.clientId,organId:"",paramList:this.drugsList};return this.infoSource.clientId?this.drugsList.length?void this.$api.medication.add(e).then(({data:e})=>{200===e.code&&this.$router.go(-1)}):this.$message.warning("请添加药品"):this.$message.warning("请选择客户")}}},o=(a("xkT6"),a("KHd+")),r=Object(o.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"medication-history-add"},[a("el-form",{ref:"form",staticClass:"form-inline",attrs:{inline:!1,rules:e.rules,model:e.infoSource,"label-position":e.right,"label-suffix":"：","label-width":"83px"}},[a("div",{staticClass:"divRightTitleDiv",staticStyle:{"margin-top":"-20px"}},[a("div",{staticClass:"divRightTitle"},[e._v("新增-用户用药信息\n                "),a("div",{staticClass:"titleBiao"})])]),e._v(" "),a("div",{staticClass:"medicate-record mt20"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"姓名",prop:"clientName"}},[a("el-popover",{ref:"userPopover",attrs:{placement:"bottom-start",width:"650",trigger:"click"},on:{show:function(t){e.popoverStatus=!0},hide:e.handlePopoperClose}},[e.popoverStatus?a("select-user",{on:{change:e.onSelectUser}}):e._e(),e._v(" "),a("el-input",{class:"select-user-trigger "+(e.id?"disabled":""),attrs:{slot:"reference",disabled:"",placeholder:"请选择客户"},slot:"reference",model:{value:e.infoSource.clientName,callback:function(t){e.$set(e.infoSource,"clientName",t)},expression:"infoSource.clientName"}},[a("i",{class:"el-icon-caret-"+(e.popoverStatus?"top":"bottom"),attrs:{slot:"suffix"},slot:"suffix"})])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio",{attrs:{label:1,disabled:""},model:{value:e.infoSource.gender,callback:function(t){e.$set(e.infoSource,"gender",t)},expression:"infoSource.gender"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:2,disabled:""},model:{value:e.infoSource.gender,callback:function(t){e.$set(e.infoSource,"gender",t)},expression:"infoSource.gender"}},[e._v("女")])],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input",{staticClass:"age-input",attrs:{disabled:""},model:{value:e.infoSource.age,callback:function(t){e.$set(e.infoSource,"age",t)},expression:"infoSource.age"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"人员类别",prop:"gridName"}},[a("el-input",{attrs:{disabled:""},model:{value:e.infoSource.gridName,callback:function(t){e.$set(e.infoSource,"gridName",t)},expression:"infoSource.gridName"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"divRightTitleDiv",staticStyle:{"margin-top":"-20px"}},[a("div",{staticClass:"divRightTitle"},[e._v("用药信息\n                "),a("div",{staticClass:"titleBiao"})])]),e._v(" "),a("div",{staticClass:"medicate-info mt20"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"就医编号",prop:"drugsName"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:100},model:{value:e.infoSource.drugsName,callback:function(t){e.$set(e.infoSource,"drugsName",t)},expression:"infoSource.drugsName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"就医类型",prop:"result"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.infoSource.result,callback:function(t){e.$set(e.infoSource,"result",t)},expression:"infoSource.result"}},e._l(e.resultList,(function(e){return a("el-option",{key:e.paramValue,attrs:{label:e.name,value:e.paramValue}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"医保卡号",prop:"specification"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:30},model:{value:e.infoSource.specification,callback:function(t){e.$set(e.infoSource,"specification",t)},expression:"infoSource.specification"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"就医机构",prop:"countDay"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:30,number:""},model:{value:e.infoSource.countDay,callback:function(t){e.$set(e.infoSource,"countDay",t)},expression:"infoSource.countDay"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"就医科室",prop:"dose"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:30},model:{value:e.infoSource.dose,callback:function(t){e.$set(e.infoSource,"dose",t)},expression:"infoSource.dose"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"主管医生",prop:"result"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.infoSource.result,callback:function(t){e.$set(e.infoSource,"result",t)},expression:"infoSource.result"}},e._l(e.resultList,(function(e){return a("el-option",{key:e.paramValue,attrs:{label:e.name,value:e.paramValue}})})),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"就医时间",prop:"startDate"}},[a("el-date-picker",{staticClass:"start-date",staticStyle:{width:"100%"},attrs:{type:"date","max-date":e.infoSource.endDate,"value-format":"yyyy-MM-dd",placeholder:"请选择开始用药时间"},model:{value:e.infoSource.startDate,callback:function(t){e.$set(e.infoSource,"startDate",t)},expression:"infoSource.startDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"出院时间",prop:"endDate"}},[a("el-date-picker",{staticClass:"end-date",staticStyle:{width:"100%"},attrs:{type:"date","min-date":e.infoSource.startDate,"value-format":"yyyy-MM-dd",placeholder:"请选择结束用药时间"},model:{value:e.infoSource.endDate,callback:function(t){e.$set(e.infoSource,"endDate",t)},expression:"infoSource.endDate"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"就医金额",prop:"dose"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:30},model:{value:e.infoSource.dose,callback:function(t){e.$set(e.infoSource,"dose",t)},expression:"infoSource.dose"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"当前状态",prop:"result"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.infoSource.result,callback:function(t){e.$set(e.infoSource,"result",t)},expression:"infoSource.result"}},e._l(e.resultList,(function(e){return a("el-option",{key:e.paramValue,attrs:{label:e.name,value:e.paramValue}})})),1)],1)],1)],1),e._v(" "),a("div",{staticClass:"row"},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"现病史",prop:"ingrenient"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入",maxlength:300,"show-word-limit":""},model:{value:e.infoSource.ingrenient,callback:function(t){e.$set(e.infoSource,"ingrenient",t)},expression:"infoSource.ingrenient"}})],1)],1),e._v(" "),a("div",{staticClass:"row"},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"主诉",prop:"resoures"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入",maxlength:300,"show-word-limit":""},model:{value:e.infoSource.resoures,callback:function(t){e.$set(e.infoSource,"resoures",t)},expression:"infoSource.resoures"}})],1)],1),e._v(" "),a("div",{staticClass:"row"},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"检查",prop:"resoures"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入",maxlength:300,"show-word-limit":""},model:{value:e.infoSource.resoures,callback:function(t){e.$set(e.infoSource,"resoures",t)},expression:"infoSource.resoures"}})],1)],1),e._v(" "),a("div",{staticClass:"row"},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"诊断",prop:"resoures"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入",maxlength:300,"show-word-limit":""},model:{value:e.infoSource.resoures,callback:function(t){e.$set(e.infoSource,"resoures",t)},expression:"infoSource.resoures"}})],1)],1),e._v(" "),a("div",{staticClass:"row"},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"方案",prop:"resoures"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入",maxlength:300,"show-word-limit":""},model:{value:e.infoSource.resoures,callback:function(t){e.$set(e.infoSource,"resoures",t)},expression:"infoSource.resoures"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"handle-btn mt30 mb30"},[a("el-button",{staticClass:"reset-btn",attrs:{size:"small"},on:{click:e.goBack}},[e._v("返回")]),e._v(" "),a("el-button",{staticClass:"add-btn",attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("保存")])],1)])],1)}),[],!1,null,"20dac2e2",null);t.default=r.exports},d9IU:function(e,t,a){"use strict";a("wSk1")},dlaf:function(e,t,a){},vx18:function(e,t,a){"use strict";var s={name:"detail",props:{visible:Boolean,value:Object},data:()=>({resultList:[],resultValue:""}),watch:{value(e){console.log("val",e);const t=this.resultList.find(t=>t.paramValue===e.result);console.log("v",t),this.resultValue=t?t.name:""}},mounted(){this.getResultList()},methods:{async getResultList(){const e=await this.$api.medication.getResultList(),{data:t}=e;this.resultList=t.data},cancel(){this.$emit("cancel")}}},i=(a("d9IU"),a("KHd+")),l=Object(i.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog-detail",attrs:{"modal-append-to-body":!1,title:"查看",width:"570px",visible:e.visible},on:{"update:visible":function(t){e.visible=t},close:e.cancel}},[a("div",{staticClass:"form-title"},[a("div",{staticClass:"point"}),e._v(" "),a("h3",{staticClass:"name"},[e._v("用药记录")])]),e._v(" "),a("div",{staticClass:"form-content"},[a("el-form",{ref:"form",attrs:{model:e.value,inline:!1,"label-width":"75px","label-suffix":"："}},[a("div",{staticClass:"row"},[a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"药品名称",prop:"drugsName"}},[a("span",{staticClass:"value",attrs:{title:e.value.drugsName}},[e._v(e._s(e.value.drugsName))])]),e._v(" "),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"针对问题",prop:"mainIndication"}},[a("span",{staticClass:"value",attrs:{title:e.value.mainIndication}},[e._v(e._s(e.value.mainIndication))])])],1),e._v(" "),a("div",{staticClass:"row"},[a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"规格",prop:"specification"}},[a("span",{staticClass:"value",attrs:{title:e.value.specification}},[e._v(e._s(e.value.specification))])]),e._v(" "),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"每日次数",prop:"countDay"}},[a("span",[e._v(e._s(e.value.countDay))])])],1),e._v(" "),a("div",{staticClass:"row"},[a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"开始时间",prop:"startDate"}},[a("span",[e._v(e._s(e.value.startDate))])]),e._v(" "),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"结束时间",prop:"endDate"}},[a("span",[e._v(e._s(e.value.endDate))])])],1),e._v(" "),a("div",{staticClass:"row"},[a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"每日剂量",prop:"doseOne"}},[a("span",[e._v(e._s(e.value.doseOne))])]),e._v(" "),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"当前状态",prop:"result"}},[a("span",[e._v(e._s(e.resultValue))])])],1),e._v(" "),a("div",{staticClass:"row bottom"},[a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"主要成分",prop:"ingrenient"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.value.ingrenient,placement:"top"}},[a("span",{staticClass:"value"},[e._v(e._s(e.value.ingrenient))])])],1),e._v(" "),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"用药情况",prop:"resoures"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.value.ingrenient,placement:"top"}},[a("span",{staticClass:"value"},[e._v(e._s(e.value.resoures))])])],1)],1)])],1)])}),[],!1,null,"3b3219e6",null);t.a=l.exports},wSk1:function(e,t,a){},xkT6:function(e,t,a){"use strict";a("dlaf")}}]);