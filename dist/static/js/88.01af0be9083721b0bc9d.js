(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{"0hys":function(e,t,a){"use strict";a("lFeA")},"5GiS":function(e,t,a){"use strict";a("9cNP")},"9cNP":function(e,t,a){},JxQL:function(e,t,a){},SNNn:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAACVklEQVRIS82XTUwTQRzF32zTiIfegWCa4EVN2gNQvBATrwqtJFaJiYnxoIJ0pSA26FFbijFEhJKamuBX1FKIiXBRjN6VsBzkYDkDSY/alm3idsxs2EhgP+o6WOawm+zsvN++mX/ezBJsNVmm7WUo/YSQFkqpS3vO404I+UkpXRTgGK2pIfNMk7DLZkmJUkpv84BYaRBCYgcPOO6QLadzVgN49gtwdJCi/OsTgJM8hSvQ+kw2S8oP3mtqBWZrzhxTqxf3on//gkslGQsf3iOXy+0yXltbh1On221NiKljRVFwvfsKVla+6YrX1ddjOvMWhUIBiYkxLEsSPF4vekN9cLnMo8AUvLqaxeVLFzEYGYLff0YXns/nMRAWkc1+h6/1OBa/fsGRo8cwkUhCEATD2TAFS9ISxN5ujI1PoqmpeZfIdujd6DDa2k5gfu4dRuJRpJ5MqR9g1GyD9aAM8ujhKDKZNF6nZ9DQcIgv2Aj6ODmJly+eIXiuC+KNsGnR/bVjK6g/0ImbgxEQom4DfBxXCp2dyQCgOBs8zwcc7gthWVqCVkhMVZve7U7FUA9ouYzxRJIP+EJXEI2Nh3EvFlcF9aDsOXdwf1jE+toarl7rUUMl/eYVAoFODOxYU+7g50+nkEr9mT496J44ZqIsHjc21lEsFuHxeHWr958da5F5KzKEDoPI3Fk9siyrMet2uzE88sBecVltEoZxSAhi8ftqhNqKTDaIOfi4oL8t6ok6nU74fK2mOc3G7d+DgK1dvoJBVT3sVed4W7UDPVuOqvzCaHXwv3/afgOHVcXmHzJBiQAAAABJRU5ErkJggg=="},U4H7:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAZklEQVQ4T2NkoBAwUqifYbgacOXKFbYffzibGP7/TwOHESPjLA6W73U6Ojq/0MMMaxicuXC3g+H//3IUxYyMnSYGyhXEGXD+zjsGBgZBNMXvTQxVhOhkAKVeoDgQSUmdwzUlkhIGAPFrLhGr1yU2AAAAAElFTkSuQmCC"},aYSq:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAACJklEQVRIS+2X30tTYRjHP++mckSKFFtWSBBFVIhryWw2Ay+KLupG9z9YJGJpRSZB2vphWUgg/REnb+qqi4I1VlAsiiKKSrKIUWntl7it7Y1z0iiwczY7czeei3PgvM/z/Zz3+z6853kFc5fLN34gJ3PHEDQJWDH/3oqnhDiSxzZhuxpW229rmkK7uXw3/RLZbwXETEMgzofVjtNCm6kkd8sswcpxge2gcHaod4WgzUphMy0puSecPjVm9ZqagiEudvhUaRZYjPFlcDFcXVCzKFY7ahSUijImI4l/TsRy8OYNK7lxZg/ReJr2njtLA966cRVjA61UKnb6rjwkGI4UH7x9UzVjA17Ky+30Dod48PSzYb0YWr26WiGVyRJLZAxFGrfUcL3fi90m6LkU4tHzL6ZFaggeH92HUmGn82yAD5HkgmI7t9Uyemo3Ukq6L4R48vKrKVT/OxntXPu99Qx1NTEVTenw95/+rlJ3g4NrJz1ks5Iuf5Bnr6fzgpqCtYC9nvX4u91EE2kd/u5jXBdvca5h5LiHVDrLkXNBXrz9ljc0L7AW1OZex8WjzSRmMhwaDLC2torh3mZmZn9weOg+ryaiBUHzBmuBra46LvftYjaVpVIpI5789RFvJmMFQwsCa8GeRgcjJ1pIJDN0DgaYmLN9MeSCd676uird4qnvqcXwfucUDP4v2h/Jy2CrnDTVKV2zV7L2tmQNvbYYJTnCzFfBUh/afgLj0Or9q13RqgAAAABJRU5ErkJggg=="},lFeA:function(e,t,a){},qmy0:function(e,t,a){},rOI6:function(e,t,a){"use strict";a("JxQL")},vOU0:function(e,t,a){"use strict";a.r(t);var i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"search-title"},[t("img",{attrs:{src:a("OygJ"),alt:""}}),this._v("\n            菜谱模版\n          ")])}],s={props:{visible:{type:Boolean,default:!1},value:{type:Object,default:()=>({})}},data:()=>({ruleForm:{id:"",dietTemplateSortId:"",name:"",intro:"",minKcal:"",maxKcal:""},rules:{dietTemplateSortId:[{required:!0,message:"请选择模版类别"}],name:[{required:!0,message:"请输入模版名称"}],minKcal:[{required:!0,message:"请输入最小卡路里"}],maxKcal:[{required:!0,message:"请输入最大卡路里"}]},menuTypeSelectName:""}),watch:{value(e){e.id?(this.ruleForm=e,this.menuTypeSelectName=e.dietTemplateSortName):(this.ruleForm={id:"",dietTemplateSortId:"",name:"",intro:"",minKcal:"",maxKcal:""},this.menuTypeSelectName="")}},computed:{visibles:{get(){return this.visible},set(){this.$emit("update:visible",!1)}}},methods:{submit(){this.$api.dietMenuTemplateInterface.saveDietMenuTemplate(this.ruleForm).then(()=>{this.$message.success("操作成功!"),this.visibles=!1,this.$parent.loadData()})},selectType(){this.$parent.menuType=2,this.$parent.isShowDietMenuTemplateType=!0}}},l=(a("5GiS"),a("KHd+")),n=Object(l.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog-detail",attrs:{title:"新增菜谱模版","modal-append-to-body":!1,width:"580px",top:"30vh",visible:e.visibles},on:{"update:visible":function(t){e.visibles=t},close:function(t){e.visibles=!1}}},[a("el-form",{staticClass:"form-content",attrs:{rules:e.rules,model:e.ruleForm,inline:"","label-width":"90px"}},[a("el-form-item",{staticStyle:{position:"relative"},attrs:{prop:"dietTemplateSortId",label:"模版类别："}},[a("el-select",{staticStyle:{width:"159px"},attrs:{placeholder:"请选择",value:e.menuTypeSelectName,clearable:""}}),e._v(" "),a("div",{staticClass:"mask",on:{click:e.selectType}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"name",label:"模版名称："}},[a("el-input",{staticStyle:{width:"159px"},attrs:{placeholder:"请输入"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"minKcal",label:"参考范围："}},[a("el-input",{staticStyle:{width:"189px"},attrs:{placeholder:"请输入"},model:{value:e.ruleForm.minKcal,callback:function(t){e.$set(e.ruleForm,"minKcal",t)},expression:"ruleForm.minKcal"}})],1),e._v(" "),a("span",{staticClass:"line"},[e._v("-")]),e._v(" "),a("el-form-item",{attrs:{prop:"maxKcal"}},[a("el-input",{staticStyle:{width:"189px"},attrs:{placeholder:"请输入"},model:{value:e.ruleForm.maxKcal,callback:function(t){e.$set(e.ruleForm,"maxKcal",t)},expression:"ruleForm.maxKcal"}})],1),e._v(" "),a("div",{staticClass:"template-intro"},[a("el-form-item",{attrs:{label:"模版介绍："}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入",maxlength:"300","show-word-limit":""},model:{value:e.ruleForm.intro,callback:function(t){e.$set(e.ruleForm,"intro",t)},expression:"ruleForm.intro"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancelBtn",attrs:{size:"small"},on:{click:function(t){e.visibles=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"sureBtn",attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("保存")])],1)],1)}),[],!1,null,"cfd95554",null).exports,o={props:{visible:{type:Boolean,default:!1},value:{type:Object,default:()=>({})}},data:()=>({editIndex:-1,query:"",total:0,currentPage:1,pageSize:15,tableData:[]}),created(){this.loadData()},computed:{visibles:{get(){return this.visible},set(){this.$emit("update:visible",!1)}}},methods:{loadData(){this.$api.dietMenuTemplateInterface.getDietMeneTemCate({pageNo:this.currentPage,pageSize:this.pageSize,keywords:this.query}).then(e=>{const{data:t,total:a}=e.data.data;this.tableData=t,this.total=a})},handleEdit(e){this.$api.dietMenuTemplateInterface.saveDietMeneTemCate(e).then(()=>{this.$message.success("操作成功!"),this.loadData(),this.editIndex=-1})},itemCheck(e,t){this.$refs.elMenuTemplateTypeForm.clearSelection(),0!==e.length&&t&&this.$refs.elMenuTemplateTypeForm.toggleRowSelection(t,!0)},deletes(e,t){if(!e)return this.tableData.splice(t,1);this.$api.dietMenuTemplateInterface.deleteDietMenuTemCate(`[${e}]`).then(()=>{this.$message.success("删除成功!"),this.loadData()})},add(){this.tableData.push({}),this.editIndex=this.tableData.length-1},search(){this.currentPage=1,this.loadData()},reset(){this.query="",this.currentPage=1,this.loadData()},submit(){const[e={}]=this.$refs.elMenuTemplateTypeForm.selection,{name:t,id:a}=e;this.$emit("change",a,t),this.visibles=!1,this.$refs.elMenuTemplateTypeForm.clearSelection()}}},r=(a("zn6W"),Object(l.a)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"dialog-detail",attrs:{title:"菜谱模版类型","modal-append-to-body":!1,width:"580px",top:"30vh",visible:e.visibles},on:{"update:visible":function(t){e.visibles=t},close:function(t){e.visibles=!1}}},[i("div",{staticClass:"divTop"},[i("div",{staticClass:"divTitle"},[i("div",{staticClass:"diet-search"},[i("div",{staticClass:"searchCondition"},[i("div",{staticClass:"searchLeft"},[i("div",{staticClass:"searchInputFormItem"},[i("el-input",{attrs:{placeholder:"输入条件搜索"},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),e._v(" "),i("span",{staticClass:"searchBtnImgSpan",on:{click:e.search}},[i("img",{staticClass:"searchBtnImg",attrs:{src:a("RQrH")}})])],1)]),e._v(" "),i("div",{staticClass:"searchRight"},[i("div",{staticClass:"buttones"},[i("div",{staticClass:"searchFor",on:{click:e.search}},[i("img",{attrs:{src:a("nc5h"),alt:""}})]),e._v(" "),i("div",{staticClass:"resetAll",on:{click:e.reset}},[e._v("重置")]),e._v(" "),i("el-button",{staticClass:"btnNew",attrs:{type:"primary"},on:{click:e.add}},[e._v("添加新类型")])],1)])])])])]),e._v(" "),i("el-table",{ref:"elMenuTemplateTypeForm",attrs:{data:e.tableData,align:"center"},on:{select:e.itemCheck}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"模版名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{directives:[{name:"show",rawName:"v-show",value:e.editIndex!==t.$index,expression:"editIndex !== scope.$index"}]},[e._v(e._s(t.row.name))]),e._v(" "),i("el-input",{directives:[{name:"show",rawName:"v-show",value:e.editIndex===t.$index,expression:"editIndex === scope.$index"}],attrs:{placeholder:"请输入"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"id",label:"操作",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"op-box"},[i("img",{directives:[{name:"show",rawName:"v-show",value:e.editIndex!==t.$index,expression:"editIndex !== scope.$index"}],attrs:{src:a("SNNn"),alt:""},on:{click:function(a){e.editIndex=t.$index}}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:e.editIndex===t.$index,expression:"editIndex === scope.$index"}],attrs:{src:a("aYSq"),alt:""},on:{click:function(a){return e.handleEdit(t.row)}}}),e._v(" "),i("img",{attrs:{src:a("Is1e"),alt:""},on:{click:function(a){return e.deletes(t.row.id,t.$index)}}})])]}}])})],1),e._v(" "),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper, total, sizes",total:e.total,"page-sizes":[15],"current-page":e.currentPage,"page-size":e.pageSize},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.loadData}}),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"cancelBtn",attrs:{size:"small"},on:{click:function(t){e.visibles=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"sureBtn",attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("保存")])],1)],1)}),[],!1,null,"779a0712",null).exports),c=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("p",{staticClass:"title"},[this._v("中国居民")]),this._v(" "),t("p",{staticClass:"desc"},[this._v("膳食平衡宝塔")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"diet-type-item"},[t("img",{attrs:{src:a("OU4v"),alt:"膳食指南"}}),this._v(" "),t("div",[t("p",{staticClass:"title"},[this._v("中国居民")]),this._v(" "),t("p",{staticClass:"desc"},[this._v("膳食指南")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"diet-type-item"},[t("img",{attrs:{src:a("4jz/"),alt:"食物交换份"}}),this._v(" "),t("div",[t("p",{staticClass:"title"},[this._v("常见")]),this._v(" "),t("p",{staticClass:"desc"},[this._v("食物交换份")])])])}],d=a("oAyl"),p=a("ORkj"),m=a("IbDO"),u=a("TJP2"),h=a("vx++"),v=a("mLx5"),g={name:"diet_form",components:{elFoodOp:u.a,elCooking:h.a,elDietPagoda:v.a,dietProportionChart:d.a,dietProteinroportionChart:p.a,dietDistributionChart:m.a},props:{id:{type:String,default:""}},data:()=>({isShowDietPagoda:!1,isShowCooking:!1,isShowDietRule:!1,isShowFoodOp:!1,isShowTmplateSave:!1,isShowTemplateInput:!1,isShowPeopleSelect:!1,isActive:!1,analysisData:[{title:"能量",title2:"2205.23 kcal",title3:"2203.23 kcal"}],mealTypeText:["早餐","午餐","晚餐","加餐"],dietCollapseActiveNames:"1",activeCaiDtoIndex:"",editableTabsValue:"1",editableTabs:[]}),created(){this.id&&this.loadData()},methods:{deleteDietTempPlateConfigDtos(e,t,a){this.editableTabs[e].mealTypeDtos[t].dietTemplateConfigDtos.splice(a,1)},switchCaiDtoIndex(e){this.activeCaiDtoIndex=e===this.activeCaiDtoIndex?"":e},loadData(){this.$api.dietMenuTemplateInterface.getDietMenuTemConfigDetail(this.id).then(e=>{this.editableTabs=e.data.data})},back(){this.$parent.viewIndex=1},removeTab(e){const t=this.editableTabs.findIndex(t=>t.day===1*e);this.editableTabs.splice(t,1)},addTab(){const e={day:this.editableTabs.length+1,mealTypeDtos:[{mealType:1,dietTemplateConfigDtos:[]},{mealType:2,dietTemplateConfigDtos:[]},{mealType:3,dietTemplateConfigDtos:[]}]};this.editableTabs.push(e)},foodAdd(e,t){this.selectDietMenuIndex=[e,t],this.isShowFoodOp=!0},handleFoodSelect(e){e=e.map(e=>{const t={};return e.name?(t.name=e.name,t.configType=1,t.caiId=e.id,t.templateDietIngredientDtoList=e.caiIngredientDtos.map(e=>(e.name=e.dietIngredientName,e))):(t.name=e.names,t.configType=2,t.dietIngredientId=e.id),t.weight=0,t});const[t,a]=this.selectDietMenuIndex;this.editableTabs[t].mealTypeDtos[a].dietTemplateConfigDtos.push(...e)},submit(){const e=[];this.editableTabs.forEach(t=>{t.mealTypeDtos.forEach(a=>{a.dietTemplateConfigDtos.forEach(i=>{i.templateDietIngredientDtoList&&i.templateDietIngredientDtoList.forEach(s=>{e.push({dietTemplateId:this.id,configType:i.configType,day:t.day,mealType:a.mealType,dietIngredientId:i.dietIngredientId,weight:s.weight})}),e.push({dietTemplateId:this.id,configType:i.configType,day:t.day,mealType:a.mealType,caiId:i.caiId,dietIngredientId:i.dietIngredientId,weight:i.weight})})})}),this.$api.dietMenuTemplateInterface.saveDietMenuTemConfig(e).then(()=>{this.$message.success("操作成功!")})}}},f=(a("rOI6"),{name:"diet_menu_template",components:{elMenuTemplate:n,elMenuTemplateType:r,distMenuConfigForm:Object(l.a)(g,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"diet-form"},[i("div",{staticClass:"diet-form_center"},[i("div",{staticClass:"diet-type"},[i("div",{staticClass:"diet-type-item",on:{click:function(t){e.isShowDietPagoda=!0}}},[i("img",{attrs:{src:a("JD3H"),alt:"膳食平衡宝塔"}}),e._v(" "),e._m(0)]),e._v(" "),e._m(1),e._v(" "),e._m(2)]),e._v(" "),i("div",{staticClass:"diet-plan-box"},[i("el-form",[i("div",{staticClass:"diet-formulate"},[i("div",{staticClass:"diet-formulate-head",staticStyle:{"margin-bottom":"20px",position:"relative"}},[i("div",{staticClass:"item-title"},[e._v("制定食谱")])]),e._v(" "),i("el-tabs",{attrs:{type:"card",editable:""},on:{"tab-remove":e.removeTab,"tab-add":e.addTab},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.editableTabs,(function(t,s){return i("el-tab-pane",{key:t.day,attrs:{label:"第"+t.day+"天",name:t.day.toString()}},[i("el-collapse",{model:{value:e.dietCollapseActiveNames,callback:function(t){e.dietCollapseActiveNames=t},expression:"dietCollapseActiveNames"}},e._l(t.mealTypeDtos,(function(t,l){return i("el-collapse-item",{key:t.mealType,attrs:{name:t.mealType}},[i("template",{slot:"title"},[i("div",{staticClass:"header"},[i("span",[i("i",{staticClass:"el-icon-arrow-down"}),e._v(e._s(e.mealTypeText[t.mealType-1]))]),e._v(" "),i("i",{staticClass:"el-icon-plus",on:{click:function(t){return t.stopPropagation(),e.foodAdd(s,l)}}})])]),e._v(" "),e._l(t.dietTemplateConfigDtos,(function(t,n){return i("div",{key:n,staticClass:"food-collapse"},[i("div",{staticClass:"food-item"},[i("p",{staticClass:"food-title"},[i("img",{directives:[{name:"show",rawName:"v-show",value:1===t.configType,expression:"its.configType === 1"}],staticClass:"food-circle",attrs:{src:e.isActive?a("rczQ"):a("Z082"),alt:""},on:{click:function(t){e.switchCaiDtoIndex(s.toString()+l.toString()+n.toString())}}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:2===t.configType,expression:"its.configType === 2"}],staticClass:"food-circle",attrs:{src:a("U4H7"),alt:""}}),e._v("\n                        "+e._s(t.name)+"\n                        "),i("i",{staticClass:"el-icon-warning",on:{click:function(t){e.isShowCooking=!0}}})]),e._v(" "),i("div",{staticClass:"input-box"},[i("el-input",{attrs:{type:"text"},model:{value:t.weight,callback:function(a){e.$set(t,"weight",a)},expression:"its.weight"}}),e._v("\n                        g\n                      ")],1),e._v(" "),i("img",{staticClass:"food-del",attrs:{src:a("Is1e"),alt:""},on:{click:function(t){return e.deleteDietTempPlateConfigDtos(s,l,n)}}})]),e._v(" "),i("div",{staticClass:"food-list",class:{is_active:e.activeCaiDtoIndex===s.toString()+l.toString()+n.toString()}},e._l(t.templateDietIngredientDtoList,(function(t,a){return i("div",{key:a,staticClass:"food-item foot-list_item"},[i("p",[e._v(e._s(t.name))]),e._v(" "),i("div",{staticClass:"input-box"},[i("el-input",{attrs:{type:"text"},model:{value:t.weight,callback:function(a){e.$set(t,"weight",a)},expression:"its2.weight"}}),e._v("\n                          g\n                        ")],1)])})),0)])}))],2)})),1)],1)})),1)],1)]),e._v(" "),i("div",{staticClass:"form-buttons"},[i("el-button",{staticClass:"cancelBtn",attrs:{size:"small"},on:{click:e.back}},[e._v("\n          返回\n        ")]),e._v(" "),i("el-button",{staticClass:"sureBtn",attrs:{size:"small",type:"primary"},on:{click:e.submit}},[e._v("保存")])],1)],1)]),e._v(" "),i("div",{staticClass:"diet-form_right"},[i("el-tabs",{attrs:{value:"1",stretch:"",type:"border-card"}},[i("el-tab-pane",{attrs:{name:"1",label:"食谱营养素分析"}},[i("div",{staticClass:"sign"},[i("span",{staticClass:"sign-high"},[e._v("指标过高")]),e._v(" "),i("span",{staticClass:"sign-low"},[e._v("指标过低")])]),e._v(" "),i("el-table",{attrs:{"row-class-name":"table-row","header-row-class-name":"table-row",data:e.analysisData}},[i("el-table-column",{attrs:{align:"center",prop:"title",label:"成分"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"title2",label:"推荐量"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"analysis-high"},[e._v(e._s(t.row.title2))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",prop:"title3",label:"提供量"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"analysis-low"},[e._v(e._s(t.row.title3))])]}}])})],1)],1),e._v(" "),i("el-tab-pane",{attrs:{lazy:"",name:"2",label:"物质及能量分配"}},[i("div",{staticClass:"chart-box"},[i("p",{staticClass:"item-title"},[e._v("三大营养素供能比")]),e._v(" "),i("diet-proportion-chart"),e._v(" "),i("p",{staticClass:"chart-desc"},[e._v("\n            三大营养素推荐比值：蛋白质10%~15%，脂肪20%~30%，碳水化合物55%~65%\n          ")])],1),e._v(" "),i("div",{staticClass:"chart-box"},[i("p",{staticClass:"item-title"},[e._v("动物性及豆类蛋白质占总蛋白质比例")]),e._v(" "),i("diet-proteinroportion-chart"),e._v(" "),i("p",{staticClass:"chart-desc"},[e._v("\n            一般推荐动物性蛋白质和豆类蛋白质占膳食蛋白质总量30%~50%。\n          ")])],1),e._v(" "),i("div",{staticClass:"chart-box"},[i("p",{staticClass:"item-title"},[e._v("三餐能量分配比")]),e._v(" "),i("diet-distribution-chart"),e._v(" "),i("p",{staticClass:"chart-desc"},[e._v("\n            三餐推荐分配比：早餐30%，午餐40%，晚餐30%。\n          ")])],1)])],1)],1),e._v(" "),i("el-food-op",{attrs:{visible:e.isShowFoodOp},on:{change:e.handleFoodSelect,"update:visible":function(t){e.isShowFoodOp=t}}}),e._v(" "),i("el-cooking",{attrs:{visible:e.isShowCooking},on:{"update:visible":function(t){e.isShowCooking=t}}}),e._v(" "),i("el-diet-pagoda",{attrs:{visible:e.isShowDietPagoda},on:{"update:visible":function(t){e.isShowDietPagoda=t}}})],1)}),c,!1,null,"0e14fd09",null).exports},data:()=>({viewIndex:2,dietMenuConfigId:"1388090523102408706",isShowDietMenuTemplate:!1,isShowDietMenuTemplateType:!1,currentPage:1,pageSize:15,tableData:[],cateData:[],total:0,menuTypeSelectName:"",dietMenuTemDetail:{},query:{name:"",day:"",dietTemplateSortId:""}}),created(){this.loadData()},methods:{add(){this.dietMenuTemDetail={id:""},this.isShowDietMenuTemplate=!0},edit(e){this.$api.dietMenuTemplateInterface.getDietMenuTemplateDetail(e).then(e=>{this.dietMenuTemDetail=e.data.data,this.isShowDietMenuTemplate=!0})},menuTemOp(){this.isShowDietMenuTemplateType=!0},config(e){this.viewIndex=2,this.dietMenuConfigId=e},handleDietMenuTypeChange(e="",t=""){1===this.menuType?(this.menuTypeSelectName=t,this.query.dietTemplateSortId=e):(this.$refs.elMenuTemplate.menuTypeSelectName=t,this.$refs.elMenuTemplate.ruleForm.dietTemplateSortId=e)},deletes(){const e=JSON.stringify(this.$refs.dietMenuTemplate.selection.map(e=>e.id));this.$api.dietMenuTemplateInterface.deleteDietMenuTemplate(e).then(()=>{this.$message.success("删除成功!"),this.loadData()})},loadData(){this.$api.dietMenuTemplateInterface.getDietMenuTemplate({pageNo:this.currentPage,pageSize:this.pageSize,...this.query}).then(e=>{const{total:t,data:a}=e.data.data;this.total=t,this.tableData=a})},search(){this.currentPage=1,this.loadData()},reset(){this.query={name:"",query:"",dietTemplateSortId:""},this.currentPage=1,this.loadData()},upMore(){}}}),b=(a("0hys"),Object(l.a)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"diet-manage"},[1===e.viewIndex?[i("div",{staticClass:"divTop"},[i("div",{staticClass:"divTitle"},[i("div",{staticClass:"diet-search"},[e._m(0),e._v(" "),i("div",{staticClass:"searchCondition"},[i("div",{staticClass:"searchLeft"},[i("div",{staticClass:"searchInputFormItem"},[i("el-input",{attrs:{placeholder:"名称"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}}),e._v(" "),i("span",{staticClass:"searchBtnImgSpan",on:{click:e.search}},[i("img",{staticClass:"searchBtnImg",attrs:{src:a("RQrH")}})])],1),e._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("span",{staticClass:"label",staticStyle:{width:"100px"}},[e._v("模版周期：")]),e._v(" "),i("el-input",{attrs:{clearable:"",placeholder:"请填写"},model:{value:e.query.day,callback:function(t){e.$set(e.query,"day",t)},expression:"query.day"}})],1),e._v(" "),i("div",{staticStyle:{position:"relative"}},[i("span",{staticClass:"label"},[e._v("模版分类：")]),e._v(" "),i("el-select",{staticStyle:{width:"139px"},attrs:{placeholder:"请选择",value:e.menuTypeSelectName,clearable:""}}),e._v(" "),i("div",{staticClass:"mask",on:{click:function(t){e.menuType=1,e.isShowDietMenuTemplateType=!0}}})],1)]),e._v(" "),i("div",{staticClass:"searchRight"},[i("div",{staticClass:"buttones"},[i("div",{staticClass:"searchFor",on:{click:e.search}},[i("img",{attrs:{src:a("nc5h"),alt:""}})]),e._v(" "),i("div",{staticClass:"resetAll",on:{click:e.reset}},[e._v("重置")])])])])])])]),e._v(" "),i("div",{staticClass:"topbottomborder"}),e._v(" "),i("div",{staticClass:"diet_dish_flex"},[i("div",{staticClass:"divRightTitleDiv"},[i("div",[i("el-button",{staticClass:"btn-new btnAdd",staticStyle:{margin:"16px 0"},attrs:{size:"small"},on:{click:e.add}},[i("img",{attrs:{src:a("R07p")}}),e._v("新增")]),e._v(" "),i("el-button",{staticClass:"btn-new btnAdd",staticStyle:{margin:"16px 0"},attrs:{size:"small"},on:{click:e.deletes}},[i("img",{attrs:{src:a("IKay")}}),e._v("删除")]),e._v(" "),i("el-button",{staticClass:"btn-new btnAdd btnEdit",staticStyle:{margin:"16px 0"},attrs:{size:"small"},on:{click:e.menuTemOp}},[i("img",{attrs:{src:a("mEfg")}}),e._v("模版分类")])],1)]),e._v(" "),i("el-table",{ref:"dietMenuTemplate",attrs:{data:e.tableData,align:"center"}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"模版名称","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{label:"参考范围","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.minKcal)+" ~ "+e._s(t.row.maxKcal)+"\n          ")]}}],null,!1,1483725232)}),e._v(" "),i("el-table-column",{attrs:{prop:"dietTemplateSortName",label:"分类","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{prop:"day",label:"模版周期 (天)"}}),e._v(" "),i("el-table-column",{attrs:{prop:"intro",label:"介绍"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.edit(t.row.id)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.config(t.row.id)}}},[e._v("配置")])]}}],null,!1,897992962)})],1),e._v(" "),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper, total, sizes",total:e.total,"page-sizes":[15],"current-page":e.currentPage,"page-size":e.pageSize},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.loadData}})],1),e._v(" "),i("el-menu-template",{ref:"elMenuTemplate",attrs:{value:e.dietMenuTemDetail,visible:e.isShowDietMenuTemplate},on:{"update:visible":function(t){e.isShowDietMenuTemplate=t}}}),e._v(" "),i("el-menu-template-type",{attrs:{visible:e.isShowDietMenuTemplateType},on:{"update:visible":function(t){e.isShowDietMenuTemplateType=t},change:e.handleDietMenuTypeChange}})]:[i("dist-menu-config-form",{attrs:{id:e.dietMenuConfigId}})]],2)}),i,!1,null,"5ae35776",null));t.default=b.exports},zn6W:function(e,t,a){"use strict";a("qmy0")}}]);