(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{gRGk:function(a,e,t){},iOQr:function(a,e,t){"use strict";t("gRGk")},lepg:function(a,e,t){"use strict";t.r(e);var i={name:"create_edit",data:()=>({routeType:1,abnormalAlia:"",form:{labelPosition:"right",abnormalName:"",abnormalAlias:[],gender:0,state:1,dangerLevel:"",dangerLevelList:[],medicalLimit:"",medicalLimitList:[],medicalExplain:"",commonCause:"",advice:"",abnormalType:"",organTypeList:[]},rules:{abnormalName:[{required:!0,message:"请输入异常名称"}],gender:[{required:!0,message:"请选择性别"}],abnormalType:[{required:!0,message:"请选择异常类型"}],dangerLevel:[{required:!0,message:"请选择重要性"}],medicalLimit:[{required:!0,message:"请选择紧急性"}]},table:[]}),mounted(){this.onLoad()},methods:{onLoad(){const a=this.$route;"unusual_list_create"===a.meta.type?(this.routeType=1,this.$route.query.name&&(this.form.abnormalName=this.$route.query.name)):"unusual_list_edit"===a.meta.type&&(this.routeType=2,this.getDetail()),this.getOrganTypeList(),this.getImportList(),this.getQuickList()},async getDetail(){const a=await this.$api.unusualListInterface.getOrganAbnormal({id:1}),{data:e}=a.data;this.form.abnormalName=e.abnormalName,this.form.gender=e.gender,this.form.dangerLevel=e.dangerLevel,this.form.medicalLimit=e.medicalLimit,this.form.state=e.state,this.form.medicalExplain=e.medicalExplain,this.form.commonCause=e.commonCause,this.form.advice=e.advice,this.form.abnormalType=e.abnormalType,this.form.abnormalAlias=e.abnormalAlias.map(a=>({name:a}))},async getOrganTypeList(){const{data:a}=await this.$api.unusualListInterface.getOrganTypeList();this.$set(this.form,"organTypeList",a.data)},async getImportList(){const{data:a}=await this.$api.unusualListInterface.getImportList();this.$set(this.form,"dangerLevelList",a.data)},async getQuickList(){const{data:a}=await this.$api.unusualListInterface.getQuickList();this.$set(this.form,"medicalLimitList",a.data)},addAlias(){if(""===this.abnormalAlia)return this.$message.warning("请填写异常别名");this.form.abnormalAlias.push({name:this.abnormalAlia}),this.abnormalAlia=""},aliasRemove(a){this.form.abnormalAlias.splice(a,1)},cancel(){this.$router.back()},save(){this.$refs.form.validate(async a=>{if(a){const a=this.form.abnormalAlias.filter(a=>""!==a.name).map(a=>a.name),e={abnormalName:this.form.abnormalName,gender:this.form.gender,dangerLevel:this.form.dangerLevel,medicalLimit:this.form.medicalLimit,state:this.form.state,medicalExplain:this.form.medicalExplain,commonCause:this.form.commonCause,advice:this.form.advice,abnormalType:this.form.abnormalType,abnormalAlias:a};1===this.routeType?await this.$api.unusualListInterface.saveOrganAbnormal(e):2===this.routeType&&(e.id=this.$route.params.id,await this.$api.unusualListInterface.updateOrganAbnormal(e)),1===this.routeType&&Object.assign(this.$data,this.$options.data()),this.$message.success("操作成功"),this.cancel()}})}}},l=(t("iOQr"),t("KHd+")),s=Object(l.a)(i,(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"create-edit"},[t("el-form",{ref:"form",staticClass:"user-edit-form",attrs:{inline:!1,"label-position":a.form.labelPosition,model:a.form,rules:a.rules,"label-width":"90px"}},[t("div",{staticClass:"divRight"},[t("div",{staticClass:"divRightTitleDiv"},[t("div",{staticClass:"divRightTitle"},[t("span",[a._v("|")]),a._v("\n          "+a._s("unusual_list_edit"===a.$route.meta.type?"编辑":"新增")+"-异常库\n        ")])])]),a._v(" "),t("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"异常名称",prop:"abnormalName"}},[t("el-input",{attrs:{"show-word-limit":"",placeholder:"请输入异常名称"},model:{value:a.form.abnormalName,callback:function(e){a.$set(a.form,"abnormalName",e)},expression:"form.abnormalName"}})],1),a._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"其他名称",prop:"abnormalAlias"}},[t("el-input",{attrs:{maxlength:"30",placeholder:"请输入异常别名"},model:{value:a.abnormalAlia,callback:function(e){a.abnormalAlia=e},expression:"abnormalAlia"}})],1)],1),a._v(" "),t("el-col",{attrs:{span:18}},[t("ul",{staticClass:"alias-content"},[t("li",{staticClass:"item"},[t("el-button",{staticClass:"handle-add",on:{click:a.addAlias}},[a._v("+添加")]),a._v(" "),t("span",{staticStyle:{"margin-left":"30px"}},[a._v("已选名称:")]),a._v(" "),a._l(a.form.abnormalAlias,(function(e,i){return t("el-tag",{key:i,staticStyle:{"margin-right":"6px"},attrs:{closable:""},on:{close:function(e){return a.aliasRemove(i)}}},[a._v(a._s(e.name))])}))],2),a._v(" "),t("li",{staticClass:"action"})])])],1),a._v(" "),t("div",{staticClass:"row"},[t("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"性别",prop:"gender"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:a.form.gender,callback:function(e){a.$set(a.form,"gender",e)},expression:"form.gender"}},[t("el-option",{attrs:{label:"不限",value:0}},[a._v("不限")]),a._v(" "),t("el-option",{attrs:{label:"男",value:1}},[a._v("男")]),a._v(" "),t("el-option",{attrs:{label:"女",value:2}},[a._v("女")])],1)],1),a._v(" "),t("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"异常类型",prop:"abnormalType"}},[t("el-select",{staticStyle:{width:"100%"},model:{value:a.form.abnormalType,callback:function(e){a.$set(a.form,"abnormalType",e)},expression:"form.abnormalType"}},a._l(a.form.organTypeList,(function(a){return t("el-option",{key:a.paramValue,attrs:{label:a.name,value:a.paramValue}})})),1)],1),a._v(" "),t("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"重要性",prop:"dangerLevel"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择重要性"},model:{value:a.form.dangerLevel,callback:function(e){a.$set(a.form,"dangerLevel",e)},expression:"form.dangerLevel"}},a._l(a.form.dangerLevelList,(function(a,e){return t("el-option",{key:e,attrs:{label:a.name,value:a.paramValue}})})),1)],1),a._v(" "),t("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"紧急性",prop:"medicalLimit"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择紧急性"},model:{value:a.form.medicalLimit,callback:function(e){a.$set(a.form,"medicalLimit",e)},expression:"form.medicalLimit"}},a._l(a.form.medicalLimitList,(function(a,e){return t("el-option",{key:e,attrs:{label:a.name,value:a.paramValue}})})),1)],1)],1),a._v(" "),t("el-form-item",{attrs:{label:"医学解释",prop:"medicalExplain"}},[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容",maxlength:1e3,"show-word-limit":""},model:{value:a.form.medicalExplain,callback:function(e){a.$set(a.form,"medicalExplain",e)},expression:"form.medicalExplain"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"常见原因",prop:"commonCause"}},[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容",maxlength:1e3,"show-word-limit":""},model:{value:a.form.commonCause,callback:function(e){a.$set(a.form,"commonCause",e)},expression:"form.commonCause"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"建议",prop:"advice"}},[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容",maxlength:1e3,"show-word-limit":""},model:{value:a.form.advice,callback:function(e){a.$set(a.form,"advice",e)},expression:"form.advice"}})],1),a._v(" "),t("div",{staticClass:"footer"},[t("el-button",{staticClass:"reset-btn",attrs:{size:"small"},on:{click:a.cancel}},[a._v("返回")]),a._v(" "),t("el-button",{staticClass:"add-btn",attrs:{type:"primary",size:"small"},on:{click:a.save}},[a._v("保存")])],1)],1)],1)}),[],!1,null,"04ee3b5d",null);e.default=s.exports}}]);