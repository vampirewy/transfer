(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{"/Vet":function(e,t,a){"use strict";var l={name:"userOpen",props:{visible:Boolean,selectedList:{default:()=>[]}},data:()=>({formData:{},params:{keyword:"",pageNo:1,pageSize:5,total:0},tableData:[],map:{},multipleSelectionAll:[],multipleSelection:[],idKey:"id"}),mounted(){const e=[];this.selectedList.forEach(t=>{e.push({id:t})}),this.multipleSelectionAll=e,this.fetch()},methods:{handleCurrentChange(e){this.search(e)},handleSizeChange(e){this.params.pageSize=e,this.search()},cancel(){this.$emit("cancel")},submit(){this.getAllSelectionData(),this.$emit("change",[...this.multipleSelectionAll]),this.multipleSelectionAll=[],this.$refs.table.clearSelection()},fetch(){this.$api.systemManageInterface.userList(Object.assign({},this.params)).then(({data:e})=>{this.params.total=e.data.total,this.tableData=e.data.data,this.tableData.forEach(e=>{this.$set(this.map,e.id,e)}),console.log(this.map),setTimeout(()=>{this.setSelectRow()},100)})},search(e=1){this.changePageCoreRecordData(),this.params.pageNo=e,this.fetch()},reset(){this.params.pageNo=1,this.fetch()},setSelectRow(){if(console.log(this.multipleSelectionAll),!this.multipleSelectionAll||this.multipleSelectionAll.length<=0)return;const e=this.idKey,t=[];this.multipleSelectionAll.forEach(a=>{t.push(a[e])}),console.log(t),this.$refs.table.clearSelection();for(let a=0;a<this.tableData.length;a++)t.indexOf(this.tableData[a][e])>=0&&this.$refs.table.toggleRowSelection(this.tableData[a],!0)},changePageCoreRecordData(){const e=this.idKey,t=this;if(this.multipleSelectionAll.length<=0)return void(this.multipleSelectionAll=this.multipleSelection);const a=[];this.multipleSelectionAll.forEach(t=>{a.push(t[e])});const l=[];this.multipleSelection.forEach(s=>{l.push(s[e]),a.indexOf(s[e])<0&&t.multipleSelectionAll.push(s)});const s=[];this.tableData.forEach(t=>{l.indexOf(t[e])<0&&s.push(t[e])}),s.forEach(l=>{if(a.indexOf(l)>=0)for(let a=0;a<t.multipleSelectionAll.length;a++)if(t.multipleSelectionAll[a][e]===l){t.multipleSelectionAll.splice(a,1);break}})},getAllSelectionData(){this.changePageCoreRecordData(),console.log(this.multipleSelectionAll)},handleSelectionChange(e){this.multipleSelection=e}}},s=(a("Lgyb"),a("KHd+")),i=Object(s.a)(l,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"abnormal-popoper"},[l("div",{staticClass:"divTop",staticStyle:{margin:"-15px 0 15px 0"}},[l("div",{staticClass:"searchCondition"},[l("div",{staticClass:"searchLeft"},[l("div",{staticClass:"searchInputFormItem"},[l("el-input",{attrs:{placeholder:"输入姓名搜索"},model:{value:e.params.keyword,callback:function(t){e.$set(e.params,"keyword",t)},expression:"params.keyword"}}),e._v(" "),l("span",{staticClass:"searchBtnImgSpan",on:{click:function(t){return e.search(1)}}},[l("img",{staticClass:"searchBtnImg",attrs:{src:a("RQrH")}})])],1)]),e._v(" "),l("div",{staticClass:"searchRight"},[l("div",{staticClass:"buttones"},[l("div",{staticClass:"searchFor",on:{click:function(t){return e.search(1)}}},[l("img",{attrs:{src:a("nc5h"),alt:""}})]),e._v(" "),l("div",{staticClass:"resetAll",on:{click:e.reset}},[e._v("重置")])])])])]),e._v(" "),l("el-table",{ref:"table",attrs:{data:e.tableData,align:"center"},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),l("el-table-column",{attrs:{label:"姓名",prop:"realName","min-width":"90px","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{label:"角色",prop:"roleName","min-width":"110px","show-overflow-tooltip":""}})],1),e._v(" "),l("el-pagination",{attrs:{background:"",layout:"prev,pager,next,jumper,total",total:e.params.total,"page-size":e.params.pageSize,"current-page":e.params.pageNo,"pager-count":4},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}),e._v(" "),l("div",{staticClass:"footer",staticStyle:{"text-align":"right","margin-top":"20px"}},[l("el-button",{staticClass:"cancelBtn",attrs:{size:"small"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),l("el-button",{staticClass:"sureBtn",attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("确定")])],1)],1)}),[],!1,null,"7dd0ca85",null);t.a=i.exports},"5IYs":function(e,t,a){},"7rXy":function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return i}));const l=[{name:"全部",value:-1},{name:"启用",value:1},{name:"不启用",value:0}],s=[{name:"全部",value:""},{name:"男",value:1},{name:"女",value:2}],i=[{name:"全部",value:""},{name:"已执行",value:1},{name:"待执行",value:2},{name:"已逾期",value:3},{name:"已关闭",value:4}]},FhEY:function(e,t,a){"use strict";a.r(t);var l=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"divTitle"},[t("span",[t("img",{attrs:{src:a("OygJ"),alt:""}})]),this._v("\n      待随访计划\n    ")])}],s=a("7rXy"),i=a("IZzX"),n=a("M07H"),o=a("pvXR"),r=a("aVcm"),c=a("TcFo"),d=a("6vIJ"),u=a.n(d),p=a("u3Oj"),h=a("/Vet"),m={name:"wait_visit_plan",components:{QueryPage:i.a,Search:n.a,QueryFilter:o.a,OperateButton:r.a,ManagerList:c.a,InterventionAddMdl:p.a,userOpen:h.a},data(){return{isTrue:!0,form:{keywords:"",gender:"",workUnitName:"",planUserId:"",planDate:"",planWay:"",startTime:"",endTime:"",executeState:"2",gridId:"",tag:"",startPlanTime:"",endPlanTime:"",startCreatedTime:"",endCreatedTime:"",planUserIdList:[],createdByList:[],genderList:s.b,executeStateList:s.a},selectPlanuser:[],planUserName:"",planuserModalVisible:!1,createUserName:"",createUserModalVisible:!1,gridList:[],planWayList:[],table:{list:[],totalCount:0,currentPage:1,pageSize:15},multipleSelection:[],pickerStartTime:{disabledDate:e=>{if(this.form.endTime){const t=new Date(this.form.endTime);return e.getTime()>new Date(t).getTime()-828e5}}},pickerEndTime:{disabledDate:e=>{if(this.form.startTime){const t=new Date(this.form.startTime);return e.getTime()<new Date(t).getTime()-828e5}}}}},beforeRouteEnter(e,t,a){a(e=>{e.onLoad()})},methods:{handleSelectionChange(e){this.multipleSelection=e},onLoad(){this.getList(),this.getPlanWayList(),this.getGridList()},handleCreateUserSelectChange(e){this.$refs.createUserPopover.doClose(),this.createUserModalVisible=!1;const t=[],a=[];e.forEach(e=>{t.push(e.realName),a.push(e.id)}),this.form.createdByList=a,this.createUserName=t.join(",")},handleCreateUserClose(){this.createUserModalVisible=!1,this.$refs.createUserPopover.doClose()},handlePlanuserSelectChange(e){this.$refs.userPopover.doClose(),this.planuserModalVisible=!1;const t=[],a=[];e.forEach(e=>{t.push(e.realName),a.push(e.id)}),console.log(e),this.form.planUserIdList=a,this.planUserName=t.join(",")},handlePlanuserClose(){this.planuserModalVisible=!1,this.$refs.userPopover.doClose()},getPlanUserSelectedList(){const e=[];return this.form.planUserIdList.forEach(t=>{e.push({id:t})}),e},async getList(){const e={keywords:this.form.keywords,gender:this.form.gender,gridId:this.form.gridId,planWay:this.form.planWay,tag:this.form.tag,startPlanTime:this.form.startPlanTime,endPlanTime:this.form.endPlanTime,startCreatedTime:this.form.startCreatedTime,endCreatedTime:this.form.endCreatedTime,planUserIdList:this.form.planUserIdList,createdByList:this.form.createdByList,pageNo:this.table.currentPage,pageSize:this.table.pageSize},t=await this.$api.userFollowInterface.getIntervenePlanListPage(e),{data:a}=t.data;a&&(this.table.list=a.data||[],this.table.totalCount=a.total)},upMore(){this.isTrue=!this.isTrue},async getPlanWayList(){const e=await this.$api.userFollowInterface.getIntervenePlanWayList(),{data:t}=e.data,a=t.map(e=>{const{id:t,name:a}=e;return{id:t,name:a}});this.planWayList=a},async getGridList(){const e=await this.$api.userManagerInterface.getGridList({pageNo:1,pageSize:1e4}),{data:t}=e.data;this.gridList=t.data},async editUserFollow(e){const t=[e.clientId],a=[Object.assign({},e)];a.forEach(e=>{const t=e;t.ignore=!1,t.planUserId=e.planDoctor,1===e.planTime.split(" ").length?t.planDate=e.planTime+" 00:00:00":2===e.planTime.split(" ").length&&(t.planDate=e.planTime)});const l={organId:"",clientIds:t,intervenePlans:a.filter(e=>!e.ignore)};return await this.$api.userFollowInterface.saveIntervenePlan(l),this.$message.success("操作成功"),this.getList()},handleEditPlan(e){const t=e;t.planTime=t.planDate,this.$jDynamic.show({component:"InterventionAddMdl",data:{modalType:2,addType:"2",editType:2,modalTitle:"编辑",propsData:t,confirmfunc:async e=>{const a=e;a.id=t.id,a.clientId=t.clientId,this.editUserFollow(a)}},render:e=>e(p.a)})},handleSomeRemove(){0!==this.multipleSelection.length?this.$confirm(`<div class="delete-text-content"><img class="delete-icon" src="${u.a}"/><span>该操作无法撤销，是否确认删除！</span></div>`,"删除提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",customClass:"message-box-customize",showClose:!0}).then(async()=>{const e=[];this.multipleSelection.forEach(t=>{e.push(t.id)});const t=e;return await this.$api.userFollowInterface.deleteSomeFollowplanDel(t),this.$message.success("操作成功"),this.getList()}):this.$message({message:"请选择要删除的记录",type:"warning"})},viewiFollowPlanDetail(e){this.$router.push({path:"/health_plan/user_follow_do/do/"+e.id})},onSearch(){this.table.currentPage=1,this.getList()},onReset(){Object.assign(this.$data,this.$options.data()),this.table.currentPage=1,this.onLoad()},handleClose(e){this.$confirm("确定要关闭吗?","提示",{type:"warning"}).then(async()=>{const t={id:e.id,organId:"",clientId:"",planWay:e.planWay,planTitle:e.planTitle,planContent:e.planContent,planDate:e.planDate,planRemark:e.planRemarrk,executeState:"4",executePlanWay:"",executePlanContent:"",assortLevel:e.assortLevel,collectionQuestionType:e.collectionQuestionType};return await this.$api.userFollowInterface.intervenePlanUpdate(t),this.$message.success("操作成功"),this.getList()})},handleChange(e){this.table.currentPage=e,this.getList()}}},f=(a("S7cN"),a("KHd+")),v=Object(f.a)(m,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticClass:"divTop"},[e._m(0),e._v(" "),l("div",{staticClass:"searchCondition"},[l("div",{staticClass:"searchLeft"},[l("div",{staticClass:"searchInputFormItem"},[l("el-input",{attrs:{placeholder:"姓名/编号/单位"},model:{value:e.form.keywords,callback:function(t){e.$set(e.form,"keywords",t)},expression:"form.keywords"}}),e._v(" "),l("span",{staticClass:"searchBtnImgSpan",on:{click:e.onSearch}},[l("img",{staticClass:"searchBtnImg",attrs:{src:a("RQrH")}})])],1),e._v(" "),l("div",[l("span",[e._v("客户性别：")]),e._v(" "),l("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[l("el-option",{key:"1",attrs:{label:"男",value:"1"}}),e._v(" "),l("el-option",{key:"2",attrs:{label:"女",value:"2"}})],1)],1),e._v(" "),l("div",[l("span",[e._v("人员类别：")]),e._v(" "),l("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.gridId,callback:function(t){e.$set(e.form,"gridId",t)},expression:"form.gridId"}},e._l(e.gridList,(function(e,t){return l("el-option",{key:t,attrs:{label:e.gridName,value:e.id}})})),1)],1),e._v(" "),l("div",[l("span",[e._v("随访方式：")]),e._v(" "),l("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.planWay,callback:function(t){e.$set(e.form,"planWay",t)},expression:"form.planWay"}},e._l(e.planWayList,(function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)]),e._v(" "),l("div",{staticClass:"searchRight"},[l("div",{staticClass:"buttones"},[l("div",{staticClass:"searchFor",on:{click:function(t){return e.onSearch(1)}}},[l("img",{attrs:{src:a("nc5h"),alt:""}})]),e._v(" "),l("div",{staticClass:"resetAll",on:{click:e.onReset}},[e._v("重置")]),e._v(" "),e.isTrue?l("div",{staticClass:"more",on:{click:e.upMore}},[l("span",[e._v(">")]),e._v("\n            展开更多")]):l("div",{staticClass:"more noMore",on:{click:e.upMore}},[l("span",[e._v(">")]),e._v("收起筛选")])])])])]),e._v(" "),e.isTrue?e._e():l("div",{staticClass:"searchCondition"},[l("div",{staticClass:"searchLeft",staticStyle:{"padding-left":"5px"}},[l("div",[l("span",[e._v("随访医生：")]),e._v(" "),l("el-popover",{ref:"userPopover",attrs:{placement:"top-start",width:"545",trigger:"click"},on:{show:function(t){e.planuserModalVisible=!0},hide:function(t){e.planuserModalVisible=!1}}},[e.planuserModalVisible?l("manager-list",{attrs:{selectedList:e.getPlanUserSelectedList()},on:{change:e.handlePlanuserSelectChange,cancel:e.handlePlanuserClose}}):e._e(),e._v(" "),l("el-input",{staticClass:"select-user-trigger",staticStyle:{width:"140px"},attrs:{slot:"reference",disabled:""===e.planUserName,placeholder:"请输入"},slot:"reference",model:{value:e.planUserName,callback:function(t){e.planUserName=t},expression:"planUserName"}},[l("i",{class:"el-icon-arrow-"+(e.planuserModalVisible?"up":"down"),attrs:{slot:"suffix"},slot:"suffix"})])],1)],1),e._v(" "),l("div",[l("span",[e._v("创建人：")]),e._v(" "),l("el-popover",{ref:"createUserPopover",attrs:{placement:"top-start",width:"590",trigger:"click"},on:{show:function(t){e.createUserModalVisible=!0},hide:e.handleCreateUserClose}},[e.createUserModalVisible?l("user-open",{attrs:{selectedList:e.form.createdByList},on:{change:e.handleCreateUserSelectChange,cancel:e.handleCreateUserClose}}):e._e(),e._v(" "),l("el-input",{staticClass:"select-user-trigger",staticStyle:{width:"140px"},attrs:{slot:"reference",disabled:""===e.createUserName,placeholder:"请选择"},slot:"reference",model:{value:e.createUserName,callback:function(t){e.createUserName=t},expression:"createUserName"}},[l("i",{class:"el-icon-arrow-"+(e.createUserModalVisible?"up":"down"),attrs:{slot:"suffix"},slot:"suffix"})])],1)],1),e._v(" "),l("div",[l("span",[e._v("客户标签：")]),e._v(" "),l("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"请输入"},model:{value:e.form.tag,callback:function(t){e.$set(e.form,"tag",t)},expression:"form.tag"}})],1),e._v(" "),l("div",[l("span",[e._v("随访日期：")]),e._v(" "),l("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"date","value-format":"yyyy-MM-dd","max-date":e.form.endPlanTime,placeholder:"开始时间"},model:{value:e.form.startPlanTime,callback:function(t){e.$set(e.form,"startPlanTime",t)},expression:"form.startPlanTime"}}),e._v(" "),l("span",{staticClass:"timing"},[e._v("-")]),e._v(" "),l("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"date","value-format":"yyyy-MM-dd","min-date":e.form.startPlanTime,placeholder:"结束时间"},model:{value:e.form.endPlanTime,callback:function(t){e.$set(e.form,"endPlanTime",t)},expression:"form.endPlanTime"}})],1),e._v(" "),l("div",[l("span",[e._v("创建日期：")]),e._v(" "),l("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"date","value-format":"yyyy-MM-dd","max-date":e.form.endCreatedTime,placeholder:"开始时间"},model:{value:e.form.startCreatedTime,callback:function(t){e.$set(e.form,"startCreatedTime",t)},expression:"form.startCreatedTime"}}),e._v(" "),l("span",{staticClass:"timing"},[e._v("-")]),e._v(" "),l("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"date","value-format":"yyyy-MM-dd","min-date":e.form.startCreatedTime,placeholder:"结束时间"},model:{value:e.form.endCreatedTime,callback:function(t){e.$set(e.form,"endCreatedTime",t)},expression:"form.endCreatedTime"}})],1)])]),e._v(" "),l("div",{staticClass:"topbottomborder"}),e._v(" "),l("div",{staticClass:"divRightTitleDiv"},[l("div",[e.getAccess("wait_visit_plan_batch_delete")?l("el-button",{staticClass:"btn-new btnDel",staticStyle:{margin:"16px 0"},attrs:{size:"small"},on:{click:e.handleSomeRemove}},[l("img",{attrs:{src:a("IKay")}}),e._v("删除")]):e._e()],1)]),e._v(" "),l("div",{staticClass:"user-follow"},[l("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.table.list,align:"center"},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),l("el-table-column",{attrs:{prop:"clientNo",label:"客户编号","min-width":"90","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{class:{redToday:1===t.row.todayPlanDate,overToday:3===t.row.executeState}},[e._v("\n          "+e._s(e._f("getResult")(t.row.clientNo)))])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"clientName",label:"姓名",width:"70","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{staticClass:"clientName",on:{click:function(a){return e.commonHref.toPersonalHealth(t.row.clientId,e.$router)}}},[e._v("\n                "+e._s(e._f("getResult")(t.row.clientName))+"\n              ")])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"gender",label:"性别",width:"55px"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{class:{redToday:1===t.row.todayPlanDate,overToday:3===t.row.executeState}},[e._v(e._s(e._f("getResultGender")(t.row.gender)))])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"age",label:"年龄",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{class:{redToday:1===t.row.todayPlanDate,overToday:3===t.row.executeState}},[e._v("\n            "+e._s(e._f("getResult")(t.row.age)))])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"gridName",label:"人员类别","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{class:{redToday:1===t.row.todayPlanDate,overToday:3===t.row.executeState}},[e._v("\n          "+e._s(e._f("getResult")(t.row.gridName)))])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"workUnitName",label:"单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{class:{redToday:1===t.row.todayPlanDate,overToday:3===t.row.executeState}},[e._v("\n          "+e._s(e._f("getResult")(t.row.workUnitName)))])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"mobile",label:"手机号码",width:"90px","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{class:{redToday:1===t.row.todayPlanDate,overToday:3===t.row.executeState}},[e._v("\n          "+e._s(e._f("getResult")(t.row.mobile)))])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"planUserName",label:"随访标题","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{class:{redToday:1===t.row.todayPlanDate,overToday:3===t.row.executeState}},[e._v("\n          "+e._s(e._f("getResult")(t.row.planTitle)))])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"planUserName",label:"随访方式","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{class:{redToday:1===t.row.todayPlanDate,overToday:3===t.row.executeState}},[e._v("\n          "+e._s(e._f("getResult")(t.row.planWayName)))])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"planUserName",label:"随访内容","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{class:{redToday:1===t.row.todayPlanDate,overToday:3===t.row.executeState}},[e._v("\n          "+e._s(e._f("getResult")(t.row.planContent)))])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"templateQuestionName",label:"随访问卷","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{class:{redToday:1===t.row.todayPlanDate,overToday:3===t.row.executeState}},[e._v("\n          "+e._s(e._f("getResult")(t.row.templateQuestionName)))])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"planUserName",label:"干预人","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{class:{redToday:1===t.row.todayPlanDate,overToday:3===t.row.executeState}},[e._v("\n          "+e._s(e._f("getResult")(t.row.planUserName)))])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"executeTime",label:"随访日期",width:"120px","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{class:{redToday:1===t.row.todayPlanDate,overToday:3===t.row.executeState}},[e._v(e._s(e._f("getResultDate")(t.row.planDate)))])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"createdByName",label:"创建人","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{class:{redToday:1===t.row.todayPlanDate,overToday:3===t.row.executeState}},[e._v(e._s(e._f("getResult")(t.row.createdByName)))])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"操作",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.getAccess("wait_visit_plan_edit")?l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEditPlan(t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),e.getAccess("wait_visit_plan_exec")?l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.viewiFollowPlanDetail(t.row)}}},[e._v("执行")]):e._e()]}}])})],1),e._v(" "),l("div",{staticClass:"warn"},[e._v("\n          注：表格内红色文字代表当天计划\n        ")]),e._v(" "),l("div",{staticClass:"over"},[e._v("\n          注：表格内橙色文字代表已逾期计划\n        ")]),e._v(" "),l("el-pagination",{attrs:{background:"","current-page":e.table.currentPage,"page-size":e.table.pageSize,layout:"prev, pager, next, jumper, total, sizes",total:e.table.totalCount,pageSizes:[15],"pager-count":4},on:{"current-change":e.handleChange}})],1)])}),l,!1,null,"239ed80c",null);t.default=v.exports},"I+GW":function(e,t,a){"use strict";a("kLQt")},IZzX:function(e,t,a){"use strict";var l={name:"QueryPage",data:()=>({hideQuery:!1}),methods:{expand(){this.hideQuery=!this.hideQuery}}},s=(a("RHUu"),a("KHd+")),i=Object(s.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"query-page"},[a("div",{staticClass:"left"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.hideQuery,expression:"!hideQuery"}],staticClass:"query-content"},[e._t("left"),e._v(" "),a("div",{staticClass:"buttons"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.$emit("reset")}}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.$emit("search")}}},[e._v("搜索")])],1)],2),e._v(" "),a("div",{class:{"put-away":!0,"query-hide":e.hideQuery},on:{click:e.expand}},[e._v("\n      "+e._s(e.hideQuery?"展开":"收起")+"\n    ")])]),e._v(" "),a("div",{class:{right:!0,"query-hide":e.hideQuery}},[e._t("right")],2)])}),[],!1,null,"7b3a3e7c",null);t.a=i.exports},Lgyb:function(e,t,a){"use strict";a("Xjh3")},M07H:function(e,t,a){"use strict";var l={name:"Search"},s=(a("hDp5"),a("KHd+")),i=Object(s.a)(l,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"search-component"},[this._m(0),this._v(" "),this._t("default"),this._v(" "),t("div",{staticClass:"ge"})],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"search-title"},[t("span",[this._v("搜索")])])}],!1,null,"1f1475af",null);t.a=i.exports},OygJ:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAYAAAH+wC8WAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAACKADAAQAAAABAAAACgAAAADMjAoIAAAAuElEQVQYGWOwPKRvxvT3H8MMBjAwP2BYx2i2X/8/lKf/GMSAiDAy/GKASSHUAKVPOV5kZAJrgBLmBw2LGcwO6F82O6ifDpNgYvjPoMMAtAlkB0gQxQwuBkFOFDMOOB74ARcA2QDRckD/HNAcQ5ihjIxM9ScdzjfB+TAHwgRgNCMTU8lJ+/O9KJbCJME00Htc/wX5WVAEoRygNXVAa5pBXBYmFhaLf3//zAG6SOA/I0PLKfuLM5E1AQAAGz2Gey2QjAAAAABJRU5ErkJggg=="},RHUu:function(e,t,a){"use strict";a("eXrY")},S7cN:function(e,t,a){"use strict";a("kFgw")},TcFo:function(e,t,a){"use strict";var l={name:"doctorOpen",props:{visible:Boolean,selectedList:{default:()=>[]}},data:()=>({formData:{},params:{keyword:"",pageNo:1,pageSize:5,total:0},tableData:[],map:{},multipleSelectionAll:[],multipleSelection:[],idKey:"id"}),mounted(){this.multipleSelectionAll=this.selectedList,this.fetch()},methods:{handleCurrentChange(e){this.search(e)},handleSizeChange(e){this.params.pageSize=e,this.search()},cancel(){this.$emit("cancel")},submit(){this.getAllSelectionData(),this.$emit("change",[...this.multipleSelectionAll]),this.multipleSelectionAll=[],this.$refs.table.clearSelection()},fetch(){this.$api.userManagerInterface.searchDoctor(Object.assign({},this.params)).then(({data:e})=>{this.params.total=e.data.total,this.tableData=e.data.data,this.tableData.forEach(e=>{this.$set(this.map,e.id,e)}),console.log(this.map),setTimeout(()=>{this.setSelectRow()},100)})},search(e=1){this.changePageCoreRecordData(),this.params.pageNo=e,this.fetch()},reset(){this.params.keyword="",this.params.pageNo=1,this.fetch()},setSelectRow(){if(console.log(this.multipleSelectionAll),!this.multipleSelectionAll||this.multipleSelectionAll.length<=0)return;const e=this.idKey,t=[];this.multipleSelectionAll.forEach(a=>{t.push(a[e])}),console.log(t),this.$refs.table.clearSelection();for(let a=0;a<this.tableData.length;a++)t.indexOf(this.tableData[a][e])>=0&&this.$refs.table.toggleRowSelection(this.tableData[a],!0)},changePageCoreRecordData(){const e=this.idKey,t=this;if(this.multipleSelectionAll.length<=0)return void(this.multipleSelectionAll=this.multipleSelection);const a=[];this.multipleSelectionAll.forEach(t=>{a.push(t[e])});const l=[];this.multipleSelection.forEach(s=>{l.push(s[e]),a.indexOf(s[e])<0&&t.multipleSelectionAll.push(s)});const s=[];this.tableData.forEach(t=>{l.indexOf(t[e])<0&&s.push(t[e])}),s.forEach(l=>{if(a.indexOf(l)>=0)for(let a=0;a<t.multipleSelectionAll.length;a++)if(t.multipleSelectionAll[a][e]===l){t.multipleSelectionAll.splice(a,1);break}})},getAllSelectionData(){this.changePageCoreRecordData(),console.log(this.multipleSelectionAll)},handleSelectionChange(e){this.multipleSelection=e}}},s=(a("I+GW"),a("KHd+")),i=Object(s.a)(l,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"abnormal-popoper"},[l("div",{staticClass:"divTop",staticStyle:{margin:"-15px 0 15px 0"}},[l("div",{staticClass:"searchCondition"},[l("div",{staticClass:"searchLeft"},[l("div",{staticClass:"searchInputFormItem"},[l("el-input",{attrs:{placeholder:"输入医生姓名搜索"},model:{value:e.params.keyword,callback:function(t){e.$set(e.params,"keyword",t)},expression:"params.keyword"}}),e._v(" "),l("span",{staticClass:"searchBtnImgSpan",on:{click:function(t){return e.search(1)}}},[l("img",{staticClass:"searchBtnImg",attrs:{src:a("RQrH")}})])],1)]),e._v(" "),l("div",{staticClass:"searchRight"},[l("div",{staticClass:"buttones"},[l("div",{staticClass:"searchFor",on:{click:function(t){return e.search(1)}}},[l("img",{attrs:{src:a("nc5h"),alt:""}})]),e._v(" "),l("div",{staticClass:"resetAll",on:{click:e.reset}},[e._v("重置")])])])])]),e._v(" "),l("el-table",{ref:"table",attrs:{data:e.tableData,align:"center"},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),l("el-table-column",{attrs:{label:"姓名",prop:"realName","min-width":"90px","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{label:"角色",prop:"roleName","min-width":"110px","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{label:"简介",prop:"introduction","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.introduction?l("span",[e._v(e._s(t.row.introduction))]):e._e(),e._v(" "),t.row.introduction?e._e():l("span",[e._v("-")])]}}])})],1),e._v(" "),l("el-pagination",{attrs:{background:"",layout:"prev,pager,next,jumper,total",total:e.params.total,"page-size":e.params.pageSize,"current-page":e.params.pageNo,"pager-count":4},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}),e._v(" "),l("div",{staticClass:"footer"},[l("el-button",{staticClass:"cancelBtn",attrs:{size:"small"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),l("el-button",{staticClass:"sureBtn",attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("确定")])],1)],1)}),[],!1,null,"4105f00e",null);t.a=i.exports},Xjh3:function(e,t,a){},eXrY:function(e,t,a){},ekRf:function(e,t,a){},hDp5:function(e,t,a){"use strict";a("5IYs")},kFgw:function(e,t,a){},kLQt:function(e,t,a){},n9gm:function(e,t,a){"use strict";a("ekRf")},pvXR:function(e,t,a){"use strict";var l={name:"SearchFilter"},s=(a("n9gm"),a("KHd+")),i=Object(s.a)(l,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"filter-component"},[this._m(0),this._v(" "),this._t("default")],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"filter-title"},[t("span",[this._v("筛选条件")])])}],!1,null,"3e24b622",null);t.a=i.exports}}]);