(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{"10YX":function(e,t,a){"use strict";a("kgZx")},e9b3:function(e,t,a){"use strict";a.r(t);var s=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"divTitle"},[t("span",[t("img",{attrs:{src:a("OygJ"),alt:""}})]),this._v("\n      短信记录\n    ")])}],i=a("7rXy"),l=a("IZzX"),r=a("M07H"),n=a("pvXR"),o=a("aVcm"),c=a("TcFo"),d=a("5i/l"),m=a.n(d),p={name:"detail",data:()=>({show:!0,modalTitle:"",form:{}}),mounted(){this.onLoad()},methods:{onLoad(){this.$nextTick(async()=>{console.log(this.propsData),this.form=this.propsData})},onVisible(e){e||this.$jDynamic.hide({component:"detail"})},cancel(){this.show=!1}}},u=(a("10YX"),a("KHd+")),h=Object(u.a)(p,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"el-plan-setting-mdl",attrs:{title:e.modalTitle,visible:e.show,width:"550px",alignFooter:"right","close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t},close:e.onVisible}},[a("div",{staticClass:"body"},[a("div",{staticClass:"header"},[a("el-form",{ref:"form",staticClass:"form-inline",attrs:{inline:!1,model:e.form,"label-width":"85px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计费条数："}},[e._v("\n            "+e._s(e.form.gender)+"\n          ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机号码："}},[e._v("\n            "+e._s(e.form.mobile)+"\n          ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"创建时间："}},[e._v("\n              "+e._s(e.form.gender)+"\n            ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"创建人："}},[e._v("\n              "+e._s(e.form.gender)+"\n            ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticClass:"desc",attrs:{label:"短信内容："}},[e._v("\n              "+e._s(e.form.gender)+"\n            ")])],1)],1)],1)],1)])])}),[],!1,null,"4e58dc90",null).exports,f=a("/Vet"),v={name:"sms_history",components:{QueryPage:l.a,Search:r.a,QueryFilter:n.a,OperateButton:o.a,ManagerList:c.a,detail:h,userOpen:f.a},data(){return{isTrue:!0,form:{keywords:"",gender:"",workUnitName:"",planUserId:"",planDate:"",planWay:"",startTime:"",endTime:"",executeState:"2",gridId:"",tag:"",startPlanTime:"",endPlanTime:"",startCreatedTime:"",endCreatedTime:"",planUserIdList:[],createdByList:[],genderList:i.b,executeStateList:i.a},selectPlanuser:[],planUserName:"",planuserModalVisible:!1,createUserName:"",createUserModalVisible:!1,gridList:[],planWayList:[],table:{list:[],totalCount:0,currentPage:1,pageSize:15},multipleSelection:[],pickerStartTime:{disabledDate:e=>{if(this.form.endTime){const t=new Date(this.form.endTime);return e.getTime()>new Date(t).getTime()-828e5}}},pickerEndTime:{disabledDate:e=>{if(this.form.startTime){const t=new Date(this.form.startTime);return e.getTime()<new Date(t).getTime()-828e5}}}}},activated(){this.onLoad()},methods:{handleSelectionChange(e){this.multipleSelection=e},onLoad(){this.getList(),this.getPlanWayList(),this.getGridList()},handleCreateUserSelectChange(e){this.$refs.createUserPopover.doClose(),this.createUserModalVisible=!1;const t=[],a=[];e.forEach(e=>{t.push(e.realName),a.push(e.id)}),this.form.createdByList=a,this.createUserName=t.join(",")},handleCreateUserClose(){this.createUserModalVisible=!1,this.$refs.createUserPopover.doClose()},handlePlanuserSelectChange(e){this.$refs.userPopover.doClose(),this.planuserModalVisible=!1;const t=[],a=[];e.forEach(e=>{t.push(e.realName),a.push(e.id)}),console.log(e),this.form.planUserIdList=a,this.planUserName=t.join(",")},handlePlanuserClose(){this.planuserModalVisible=!1,this.$refs.userPopover.doClose()},getPlanUserSelectedList(){const e=[];return this.form.planUserIdList.forEach(t=>{e.push({id:t})}),e},async getList(){const e={keywords:this.form.keywords,gender:this.form.gender,gridId:this.form.gridId,planWay:this.form.planWay,tag:this.form.tag,startPlanTime:this.form.startPlanTime,endPlanTime:this.form.endPlanTime,startCreatedTime:this.form.startCreatedTime,endCreatedTime:this.form.endCreatedTime,planUserIdList:this.form.planUserIdList,createdByList:this.form.createdByList,pageNo:this.table.currentPage,pageSize:this.table.pageSize},t=await this.$api.userFollowInterface.getIntervenePlanListPage(e),{data:a}=t.data;a&&(this.table.list=a.data||[],this.table.totalCount=a.total)},upMore(){this.isTrue=!this.isTrue},async getPlanWayList(){const e=await this.$api.userFollowInterface.getIntervenePlanWayList(),{data:t}=e.data,a=t.map(e=>{const{id:t,name:a}=e;return{id:t,name:a}});this.planWayList=a},async getGridList(){const e=await this.$api.userManagerInterface.getGridList({pageNo:1,pageSize:1e4}),{data:t}=e.data;this.gridList=t.data},handleView(e){const t=e;this.$jDynamic.show({component:"detail",data:{modalTitle:"查看",propsData:t,confirmfunc:async e=>{console.log(e)}},render:e=>e(h)})},handleSomeRemove(){0!==this.multipleSelection.length?this.$confirm(`<div class="delete-text-content"><img class="delete-icon" src="${m.a}"/><span>该操作无法撤销，是否确认删除！</span></div>`,"删除提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",customClass:"message-box-customize",showClose:!0}).then(async()=>{const e=[];this.multipleSelection.forEach(t=>{e.push(t.id)});const t=e;return await this.$api.userFollowInterface.deleteSomeFollowplanDel(t),this.$message.success("操作成功"),this.getList()}):this.$message({message:"请选择要删除的记录",type:"warning"})},onSearch(){this.table.currentPage=1,this.getList()},onReset(){Object.assign(this.$data,this.$options.data()),this.table.currentPage=1,this.onLoad()},handleChange(e){this.table.currentPage=e,this.getList()}}},g=(a("r4SU"),Object(u.a)(v,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"divTop"},[e._m(0),e._v(" "),s("div",{staticClass:"searchCondition"},[s("div",{staticClass:"searchLeft"},[s("div",{staticClass:"searchInputFormItem"},[s("el-input",{attrs:{placeholder:"姓名/编号"},model:{value:e.form.keywords,callback:function(t){e.$set(e.form,"keywords",t)},expression:"form.keywords"}}),e._v(" "),s("span",{staticClass:"searchBtnImgSpan",on:{click:e.onSearch}},[s("img",{staticClass:"searchBtnImg",attrs:{src:a("RQrH")}})])],1),e._v(" "),s("div",[s("span",[e._v("客户性别：")]),e._v(" "),s("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[s("el-option",{key:"1",attrs:{label:"男",value:"1"}}),e._v(" "),s("el-option",{key:"2",attrs:{label:"女",value:"2"}})],1)],1),e._v(" "),s("div",[s("span",[e._v("人员类别：")]),e._v(" "),s("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.gridId,callback:function(t){e.$set(e.form,"gridId",t)},expression:"form.gridId"}},e._l(e.gridList,(function(e,t){return s("el-option",{key:t,attrs:{label:e.gridName,value:e.id}})})),1)],1),e._v(" "),s("div",[s("span",[e._v("手机号码：")]),e._v(" "),s("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1)]),e._v(" "),s("div",{staticClass:"searchRight"},[s("div",{staticClass:"buttones"},[s("div",{staticClass:"searchFor",on:{click:function(t){return e.onSearch(1)}}},[s("img",{attrs:{src:a("nc5h"),alt:""}})]),e._v(" "),s("div",{staticClass:"resetAll",on:{click:e.onReset}},[e._v("重置")]),e._v(" "),e.isTrue?s("div",{staticClass:"more",on:{click:e.upMore}},[s("span",[e._v(">")]),e._v("\n            展开更多")]):s("div",{staticClass:"more noMore",on:{click:e.upMore}},[s("span",[e._v(">")]),e._v("收起筛选")])])])])]),e._v(" "),e.isTrue?e._e():s("div",{staticClass:"searchCondition"},[s("div",{staticClass:"searchLeft",staticStyle:{"padding-left":"5px"}},[s("div",[s("span",[e._v("发送日期：")]),e._v(" "),s("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"date","value-format":"yyyy-MM-dd","max-date":e.form.endCreatedTime,placeholder:"开始时间"},model:{value:e.form.startCreatedTime,callback:function(t){e.$set(e.form,"startCreatedTime",t)},expression:"form.startCreatedTime"}}),e._v(" "),s("span",{staticClass:"timing"},[e._v("-")]),e._v(" "),s("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"date","value-format":"yyyy-MM-dd","min-date":e.form.startCreatedTime,placeholder:"结束时间"},model:{value:e.form.endCreatedTime,callback:function(t){e.$set(e.form,"endCreatedTime",t)},expression:"form.endCreatedTime"}})],1)])]),e._v(" "),s("div",{staticClass:"topbottomborder"}),e._v(" "),s("div",{staticClass:"divRightTitleDiv"},[s("div",[e.getAccess("wait_visit_plan_batch_delete")?s("el-button",{staticClass:"btn-new btnDel",staticStyle:{margin:"16px 0"},attrs:{size:"small"},on:{click:e.handleSomeRemove}},[s("img",{attrs:{src:a("IKay")}}),e._v("删除")]):e._e()],1)]),e._v(" "),s("div",{staticClass:"user-follow"},[s("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.table.list,align:"center"},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),s("el-table-column",{attrs:{prop:"clientNo",label:"客户编号","min-width":"90","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e._f("getResult")(t.row.clientNo)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"clientName",label:"姓名",width:"90","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticClass:"clientName",on:{click:function(a){return e.commonHref.toPersonalHealth(t.row.clientId,e.$router)}}},[e._v("\n                "+e._s(e._f("getResult")(t.row.clientName))+"\n              ")])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"gender",label:"性别",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e._f("getResultGender")(t.row.gender)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"age",label:"年龄",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e._f("getResult")(t.row.age)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"mobile",label:"手机号",width:"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e._f("getResult")(t.row.mobile)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"gridName",label:"人员类别","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e._f("getResult")(t.row.gridName)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"workUnitName",label:"短信内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e._f("getResult")(t.row.workUnitName)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"executeTime",label:"发送日期",width:"120px","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e._f("getResultDate")(t.row.planDate)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleView(t.row)}}},[e._v("查看")])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"","current-page":e.table.currentPage,"page-size":e.table.pageSize,layout:"prev, pager, next, jumper, total, sizes",total:e.table.totalCount,pageSizes:[15],"pager-count":5},on:{"current-change":e.handleChange}})],1)])}),s,!1,null,"520bdd4f",null));t.default=g.exports},kgZx:function(e,t,a){},r4SU:function(e,t,a){"use strict";a("ws19")},ws19:function(e,t,a){}}]);